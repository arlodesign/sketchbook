(self.webpackChunksketchbook=self.webpackChunksketchbook||[]).push([[6995],{42281:function(e,t,i){const r=i(20972);e.exports=function({framesPerSecond:e,duration:t,loop:i}={}){const s=r(),n=r(),a=r();a.addListener((function(){i.elapsedFrames++,i.elapsedFramesTotal++,i.elapsedFrames%i.framesPerLoop==0?(i.elapsedFrames=0,i.elapsedLoops++,i.progress=i.elapsedFrames/i.framesPerLoop,i.theta=i.progress*Math.PI*2,s.invoke()):(i.progress=i.elapsedFrames/i.framesPerLoop,i.theta=i.progress*Math.PI*2)}));const o=Math.floor(t*e),h=1/e*1e3;Object.assign(i,{start:function(e){let t=Date.now();!function r(){let s=i.elapsedFramesTotal*i.frameDeltaTime;Date.now()-t>=s&&(a.invoke(),e(),n.invoke()),requestAnimationFrame(r)}()},onLoop:s,onPreRender:a,onPostRender:n,preRender:e=>a.invoke(),postRender:e=>n.invoke(),animationFrame:e=>onAnimationFrame.invoke(),get framesPerLoop(){return o},get framesPerSecond(){return e},get frameDeltaTime(){return h},elapsedFrames:-1,elapsedFramesTotal:-1,elapsedLoops:-1,progress:void 0,theta:void 0})}},22599:function(e,t,i){const r=i(42281),s=i(37799),n=i(10612);e.exports=function({duration:e=3,framesPerSecond:t=30,gif:i=!1,gifRender:a,gifOpen:o,gifDownload:h,gifStartLoop:l,gifEndLoop:d,gifFileName:p,gifOptions:u,noise:f={},noiseRadius:c,noiseSeed:v,canvas:m}={}){const g={};return r({framesPerSecond:t,duration:e,loop:g}),void 0!==c&&(f.radius=c),void 0!==v&&(f.seed=v),s(g,f),!1!==i&&(i=!0===i?{}:i,void 0!==m&&(i.canvas=m),void 0!==a&&(i.render=a),void 0!==o&&(i.open=o),void 0!==h&&(i.download=h),void 0!==l&&(i.startLoop=l),void 0!==u&&(i.options=u),void 0!==d&&(i.endLoop=d),void 0!==p&&(i.fileName=p),n(g,i)),g}},20972:function(e){e.exports=function(){const e=[];return{_listeners:e,addListener:t=>{void 0===e.find((e=>t===e))?e.push(t):console.log(`listener already in event: ${t}`)},removeListener:t=>{void 0!==e.find((e=>t===e))?e.splice(e.indexOf(t),1):console.log(`listener not found: ${t}`)},invoke:t=>e.forEach((e=>e(t)))}}},10612:function(e,t,i){const r=i(89762),s=i(14184);e.exports=function(e,{render:t=!0,open:i=!1,download:n=!1,startLoop:a=0,endLoop:o=1,fileName:h="image.gif",canvas:l=document.getElementsByTagName("canvas")[0],options:d={}}={}){if(void 0===l)return void console.error("GIF module: no canvas found");const p=new r(Object.assign({workerScript:s},d));let u,f=!1;e.onLoop.addListener((function t(){e.elapsedLoops===a?(console.log(`creating GIF with ${c} frames`),e.onPostRender.addListener(v)):e.elapsedLoops===o&&(e.onPostRender.removeListener(v),e.onLoop.removeListener(t),console.log("rendering GIF"),u=Date.now(),p.render())})),p.on("finished",(function(r){if(f)return;f=!0;const s=Date.now()-u;console.log(`finished rendering GIF\n                    render time: ${(s/1e3).toFixed(1)} seconds\n                    approx size: ${(r.size/1e3).toFixed(0)} kb\n                    frame count: ${c}\n                    frame delay: ${e.frameDeltaTime.toFixed(1)} ms\n                    `);const a=URL.createObjectURL(r);if(t){e.onLoop.addListener((function t(){e.onLoop.removeListener(t),function(e,t){const i=document.createElement("a");i.download=t,document.body.appendChild(i);const r=document.createElement("img");r.src=e,i.href=r.src,i.appendChild(r)}(a,h)}))}i&&window.open(a),n&&function(e,t){const i=document.createElement("a");i.style.display="none",i.href=e,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}(a,h)}));const c=e.framesPerLoop*(o-a);function v(){p.addFrame(l,{copy:!0,delay:e.frameDeltaTime})}}},14184:function(e){const t=window.URL.createObjectURL(new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module \'"+o+"\'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var NeuQuant=require("./TypedNeuQuant.js");var LZWEncoder=require("./LZWEncoder.js");function ByteArray(){this.page=-1;this.pages=[];this.newPage()}ByteArray.pageSize=4096;ByteArray.charMap={};for(var i=0;i<256;i++)ByteArray.charMap[i]=String.fromCharCode(i);ByteArray.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ByteArray.pageSize);this.cursor=0};ByteArray.prototype.getData=function(){var rv="";for(var p=0;p<this.pages.length;p++){for(var i=0;i<ByteArray.pageSize;i++){rv+=ByteArray.charMap[this.pages[p][i]]}}return rv};ByteArray.prototype.writeByte=function(val){if(this.cursor>=ByteArray.pageSize)this.newPage();this.pages[this.page][this.cursor++]=val};ByteArray.prototype.writeUTFBytes=function(string){for(var l=string.length,i=0;i<l;i++)this.writeByte(string.charCodeAt(i))};ByteArray.prototype.writeBytes=function(array,offset,length){for(var l=length||array.length,i=offset||0;i<l;i++)this.writeByte(array[i])};function GIFEncoder(width,height){this.width=~~width;this.height=~~height;this.transparent=null;this.transIndex=0;this.repeat=-1;this.delay=0;this.image=null;this.pixels=null;this.indexedPixels=null;this.colorDepth=null;this.colorTab=null;this.neuQuant=null;this.usedEntry=new Array;this.palSize=7;this.dispose=-1;this.firstFrame=true;this.sample=10;this.dither=false;this.globalPalette=false;this.out=new ByteArray}GIFEncoder.prototype.setDelay=function(milliseconds){this.delay=Math.round(milliseconds/10)};GIFEncoder.prototype.setFrameRate=function(fps){this.delay=Math.round(100/fps)};GIFEncoder.prototype.setDispose=function(disposalCode){if(disposalCode>=0)this.dispose=disposalCode};GIFEncoder.prototype.setRepeat=function(repeat){this.repeat=repeat};GIFEncoder.prototype.setTransparent=function(color){this.transparent=color};GIFEncoder.prototype.addFrame=function(imageData){this.image=imageData;this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null;this.getImagePixels();this.analyzePixels();if(this.globalPalette===true)this.globalPalette=this.colorTab;if(this.firstFrame){this.writeLSD();this.writePalette();if(this.repeat>=0){this.writeNetscapeExt()}}this.writeGraphicCtrlExt();this.writeImageDesc();if(!this.firstFrame&&!this.globalPalette)this.writePalette();this.writePixels();this.firstFrame=false};GIFEncoder.prototype.finish=function(){this.out.writeByte(59)};GIFEncoder.prototype.setQuality=function(quality){if(quality<1)quality=1;this.sample=quality};GIFEncoder.prototype.setDither=function(dither){if(dither===true)dither="FloydSteinberg";this.dither=dither};GIFEncoder.prototype.setGlobalPalette=function(palette){this.globalPalette=palette};GIFEncoder.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};GIFEncoder.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};GIFEncoder.prototype.analyzePixels=function(){if(!this.colorTab){this.neuQuant=new NeuQuant(this.pixels,this.sample);this.neuQuant.buildColormap();this.colorTab=this.neuQuant.getColormap()}if(this.dither){this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null)}else{this.indexPixels()}this.pixels=null;this.colorDepth=8;this.palSize=7;if(this.transparent!==null){this.transIndex=this.findClosest(this.transparent,true)}};GIFEncoder.prototype.indexPixels=function(imgq){var nPix=this.pixels.length/3;this.indexedPixels=new Uint8Array(nPix);var k=0;for(var j=0;j<nPix;j++){var index=this.findClosestRGB(this.pixels[k++]&255,this.pixels[k++]&255,this.pixels[k++]&255);this.usedEntry[index]=true;this.indexedPixels[j]=index}};GIFEncoder.prototype.ditherPixels=function(kernel,serpentine){var kernels={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!kernel||!kernels[kernel]){throw"Unknown dithering kernel: "+kernel}var ds=kernels[kernel];var index=0,height=this.height,width=this.width,data=this.pixels;var direction=serpentine?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var y=0;y<height;y++){if(serpentine)direction=direction*-1;for(var x=direction==1?0:width-1,xend=direction==1?width:0;x!==xend;x+=direction){index=y*width+x;var idx=index*3;var r1=data[idx];var g1=data[idx+1];var b1=data[idx+2];idx=this.findClosestRGB(r1,g1,b1);this.usedEntry[idx]=true;this.indexedPixels[index]=idx;idx*=3;var r2=this.colorTab[idx];var g2=this.colorTab[idx+1];var b2=this.colorTab[idx+2];var er=r1-r2;var eg=g1-g2;var eb=b1-b2;for(var i=direction==1?0:ds.length-1,end=direction==1?ds.length:0;i!==end;i+=direction){var x1=ds[i][1];var y1=ds[i][2];if(x1+x>=0&&x1+x<width&&y1+y>=0&&y1+y<height){var d=ds[i][0];idx=index+x1+y1*width;idx*=3;data[idx]=Math.max(0,Math.min(255,data[idx]+er*d));data[idx+1]=Math.max(0,Math.min(255,data[idx+1]+eg*d));data[idx+2]=Math.max(0,Math.min(255,data[idx+2]+eb*d))}}}}};GIFEncoder.prototype.findClosest=function(c,used){return this.findClosestRGB((c&16711680)>>16,(c&65280)>>8,c&255,used)};GIFEncoder.prototype.findClosestRGB=function(r,g,b,used){if(this.colorTab===null)return-1;if(this.neuQuant&&!used){return this.neuQuant.lookupRGB(r,g,b)}var c=b|g<<8|r<<16;var minpos=0;var dmin=256*256*256;var len=this.colorTab.length;for(var i=0,index=0;i<len;index++){var dr=r-(this.colorTab[i++]&255);var dg=g-(this.colorTab[i++]&255);var db=b-(this.colorTab[i++]&255);var d=dr*dr+dg*dg+db*db;if((!used||this.usedEntry[index])&&d<dmin){dmin=d;minpos=index}}return minpos};GIFEncoder.prototype.getImagePixels=function(){var w=this.width;var h=this.height;this.pixels=new Uint8Array(w*h*3);var data=this.image;var srcPos=0;var count=0;for(var i=0;i<h;i++){for(var j=0;j<w;j++){this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];srcPos++}}};GIFEncoder.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33);this.out.writeByte(249);this.out.writeByte(4);var transp,disp;if(this.transparent===null){transp=0;disp=0}else{transp=1;disp=2}if(this.dispose>=0){disp=dispose&7}disp<<=2;this.out.writeByte(0|disp|0|transp);this.writeShort(this.delay);this.out.writeByte(this.transIndex);this.out.writeByte(0)};GIFEncoder.prototype.writeImageDesc=function(){this.out.writeByte(44);this.writeShort(0);this.writeShort(0);this.writeShort(this.width);this.writeShort(this.height);if(this.firstFrame||this.globalPalette){this.out.writeByte(0)}else{this.out.writeByte(128|0|0|0|this.palSize)}};GIFEncoder.prototype.writeLSD=function(){this.writeShort(this.width);this.writeShort(this.height);this.out.writeByte(128|112|0|this.palSize);this.out.writeByte(0);this.out.writeByte(0)};GIFEncoder.prototype.writeNetscapeExt=function(){this.out.writeByte(33);this.out.writeByte(255);this.out.writeByte(11);this.out.writeUTFBytes("NETSCAPE2.0");this.out.writeByte(3);this.out.writeByte(1);this.writeShort(this.repeat);this.out.writeByte(0)};GIFEncoder.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var n=3*256-this.colorTab.length;for(var i=0;i<n;i++)this.out.writeByte(0)};GIFEncoder.prototype.writeShort=function(pValue){this.out.writeByte(pValue&255);this.out.writeByte(pValue>>8&255)};GIFEncoder.prototype.writePixels=function(){var enc=new LZWEncoder(this.width,this.height,this.indexedPixels,this.colorDepth);enc.encode(this.out)};GIFEncoder.prototype.stream=function(){return this.out};module.exports=GIFEncoder},{"./LZWEncoder.js":2,"./TypedNeuQuant.js":3}],2:[function(require,module,exports){var EOF=-1;var BITS=12;var HSIZE=5003;var masks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function LZWEncoder(width,height,pixels,colorDepth){var initCodeSize=Math.max(2,colorDepth);var accum=new Uint8Array(256);var htab=new Int32Array(HSIZE);var codetab=new Int32Array(HSIZE);var cur_accum,cur_bits=0;var a_count;var free_ent=0;var maxcode;var clear_flg=false;var g_init_bits,ClearCode,EOFCode;function char_out(c,outs){accum[a_count++]=c;if(a_count>=254)flush_char(outs)}function cl_block(outs){cl_hash(HSIZE);free_ent=ClearCode+2;clear_flg=true;output(ClearCode,outs)}function cl_hash(hsize){for(var i=0;i<hsize;++i)htab[i]=-1}function compress(init_bits,outs){var fcode,c,i,ent,disp,hsize_reg,hshift;g_init_bits=init_bits;clear_flg=false;n_bits=g_init_bits;maxcode=MAXCODE(n_bits);ClearCode=1<<init_bits-1;EOFCode=ClearCode+1;free_ent=ClearCode+2;a_count=0;ent=nextPixel();hshift=0;for(fcode=HSIZE;fcode<65536;fcode*=2)++hshift;hshift=8-hshift;hsize_reg=HSIZE;cl_hash(hsize_reg);output(ClearCode,outs);outer_loop:while((c=nextPixel())!=EOF){fcode=(c<<BITS)+ent;i=c<<hshift^ent;if(htab[i]===fcode){ent=codetab[i];continue}else if(htab[i]>=0){disp=hsize_reg-i;if(i===0)disp=1;do{if((i-=disp)<0)i+=hsize_reg;if(htab[i]===fcode){ent=codetab[i];continue outer_loop}}while(htab[i]>=0)}output(ent,outs);ent=c;if(free_ent<1<<BITS){codetab[i]=free_ent++;htab[i]=fcode}else{cl_block(outs)}}output(ent,outs);output(EOFCode,outs)}function encode(outs){outs.writeByte(initCodeSize);remaining=width*height;curPixel=0;compress(initCodeSize+1,outs);outs.writeByte(0)}function flush_char(outs){if(a_count>0){outs.writeByte(a_count);outs.writeBytes(accum,0,a_count);a_count=0}}function MAXCODE(n_bits){return(1<<n_bits)-1}function nextPixel(){if(remaining===0)return EOF;--remaining;var pix=pixels[curPixel++];return pix&255}function output(code,outs){cur_accum&=masks[cur_bits];if(cur_bits>0)cur_accum|=code<<cur_bits;else cur_accum=code;cur_bits+=n_bits;while(cur_bits>=8){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}if(free_ent>maxcode||clear_flg){if(clear_flg){maxcode=MAXCODE(n_bits=g_init_bits);clear_flg=false}else{++n_bits;if(n_bits==BITS)maxcode=1<<BITS;else maxcode=MAXCODE(n_bits)}}if(code==EOFCode){while(cur_bits>0){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}flush_char(outs)}}this.encode=encode}module.exports=LZWEncoder},{}],3:[function(require,module,exports){var ncycles=100;var netsize=256;var maxnetpos=netsize-1;var netbiasshift=4;var intbiasshift=16;var intbias=1<<intbiasshift;var gammashift=10;var gamma=1<<gammashift;var betashift=10;var beta=intbias>>betashift;var betagamma=intbias<<gammashift-betashift;var initrad=netsize>>3;var radiusbiasshift=6;var radiusbias=1<<radiusbiasshift;var initradius=initrad*radiusbias;var radiusdec=30;var alphabiasshift=10;var initalpha=1<<alphabiasshift;var alphadec;var radbiasshift=8;var radbias=1<<radbiasshift;var alpharadbshift=alphabiasshift+radbiasshift;var alpharadbias=1<<alpharadbshift;var prime1=499;var prime2=491;var prime3=487;var prime4=503;var minpicturebytes=3*prime4;function NeuQuant(pixels,samplefac){var network;var netindex;var bias;var freq;var radpower;function init(){network=[];netindex=new Int32Array(256);bias=new Int32Array(netsize);freq=new Int32Array(netsize);radpower=new Int32Array(netsize>>3);var i,v;for(i=0;i<netsize;i++){v=(i<<netbiasshift+8)/netsize;network[i]=new Float64Array([v,v,v,0]);freq[i]=intbias/netsize;bias[i]=0}}function unbiasnet(){for(var i=0;i<netsize;i++){network[i][0]>>=netbiasshift;network[i][1]>>=netbiasshift;network[i][2]>>=netbiasshift;network[i][3]=i}}function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha;network[i][1]-=alpha*(network[i][1]-g)/initalpha;network[i][2]-=alpha*(network[i][2]-r)/initalpha}function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}}}function contest(b,g,r){var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<netsize;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i}biasdist=dist-(bias[i]>>intbiasshift-netbiasshift);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i}betafreq=freq[i]>>betashift;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift}freq[bestpos]+=beta;bias[bestpos]-=betagamma;return bestbiaspos}function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize;i++){p=network[i];smallpos=i;smallval=p[1];for(j=i+1;j<netsize;j++){q=network[j];if(q[1]<smallval){smallpos=j;smallval=q[1]}}q=network[smallpos];if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j}if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i}}netindex[previouscol]=startpos+maxnetpos>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos}function inxsearch(b,g,r){var a,p,dist;var bestd=1e3;var best=-1;var i=netindex[g];var j=i-1;while(i<netsize||j>=0){if(i<netsize){p=network[i];dist=p[1]-g;if(dist>=bestd)i=netsize;else{i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}if(j>=0){p=network[j];dist=g-p[1];if(dist>=bestd)j=-1;else{j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}}return best}function learn(){var i;var lengthcount=pixels.length;var alphadec=30+(samplefac-1)/3;var samplepixels=lengthcount/(3*samplefac);var delta=~~(samplepixels/ncycles);var alpha=initalpha;var radius=initradius;var rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=alpha*((rad*rad-i*i)*radbias/(rad*rad));var step;if(lengthcount<minpicturebytes){samplefac=1;step=3}else if(lengthcount%prime1!==0){step=3*prime1}else if(lengthcount%prime2!==0){step=3*prime2}else if(lengthcount%prime3!==0){step=3*prime3}else{step=3*prime4}var b,g,r,j;var pix=0;i=0;while(i<samplepixels){b=(pixels[pix]&255)<<netbiasshift;g=(pixels[pix+1]&255)<<netbiasshift;r=(pixels[pix+2]&255)<<netbiasshift;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec;rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(j=0;j<rad;j++)radpower[j]=alpha*((rad*rad-j*j)*radbias/(rad*rad))}}}function buildColormap(){init();learn();unbiasnet();inxbuild()}this.buildColormap=buildColormap;function getColormap(){var map=[];var index=[];for(var i=0;i<netsize;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2]}return map}this.getColormap=getColormap;this.lookupRGB=inxsearch}module.exports=NeuQuant},{}],4:[function(require,module,exports){var GIFEncoder,renderFrame;GIFEncoder=require("./GIFEncoder.js");renderFrame=function(frame){var encoder,page,stream,transfer;encoder=new GIFEncoder(frame.width,frame.height);if(frame.index===0){encoder.writeHeader()}else{encoder.firstFrame=false}encoder.setTransparent(frame.transparent);encoder.setRepeat(frame.repeat);encoder.setDelay(frame.delay);encoder.setQuality(frame.quality);encoder.setDither(frame.dither);encoder.setGlobalPalette(frame.globalPalette);encoder.addFrame(frame.data);if(frame.last){encoder.finish()}if(frame.globalPalette===true){frame.globalPalette=encoder.getGlobalPalette()}stream=encoder.stream();frame.data=stream.pages;frame.cursor=stream.cursor;frame.pageSize=stream.constructor.pageSize;if(frame.canTransfer){transfer=function(){var i,len,ref,results;ref=frame.data;results=[];for(i=0,len=ref.length;i<len;i++){page=ref[i];results.push(page.buffer)}return results}();return self.postMessage(frame,transfer)}else{return self.postMessage(frame)}};self.onmessage=function(event){return renderFrame(event.data)}},{"./GIFEncoder.js":1}]},{},[4]);'],{type:"text/javascript"}));e.exports=t},85276:function(e,t,i){window.createLoop=i(22599)},37799:function(e,t,i){"use strict";const r=i(70021);function s(e,t){return{x:Math.cos(e)*t,y:Math.sin(e)*t}}e.exports=function(e,t={}){t=Object.assign({frequency:void 0,seed:999999*Math.random(),radius:1},t);const i=new r(0);void 0!==t.frequency&&(t.radius=t.frequency),Object.assign(e,{noiseFrequency:e=>t.radius=e,noise:function({theta:r=e.theta,radius:n=t.radius,seed:a=t.seed}={}){const o=s(r,n);return i.noise2D(a+o.x,a+o.y)},noise1D:function(r,{theta:n=e.theta,radius:a=t.radius,seed:o=t.seed}={}){const h=s(n,a);return i.noise3D(o+h.x,o+h.y,o+r)},noise2D:function(r,n,{theta:a=e.theta,radius:o=t.radius,seed:h=t.seed}={}){const l=s(a,o);return i.noise4D(h+l.x,h+l.y,h+r,h+n)},noiseSeed:e=>t.seed=e,noiseRadius:e=>t.radius=e})}},89762:function(e){e.exports=function e(t,i,r){function s(a,o){if(!i[a]){if(!t[a]){if(n)return n(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[a]={exports:{}};t[a][0].call(l.exports,(function(e){return s(t[a][1][e]||e)}),l,l.exports,e,t,i,r)}return i[a].exports}for(var n=void 0,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(e,t,i){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,i,r,o,h,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(a(i=this._events[e]))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(n(i))for(o=Array.prototype.slice.call(arguments,1),r=(l=i.slice()).length,h=0;h<r;h++)l[h].apply(this,o);return!0},r.prototype.addListener=function(e,t){var i;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var i=!1;function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var i,r,a,o;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(i=this._events[e]).length,r=-1,i===t||s(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(i)){for(o=a;o-- >0;)if(i[o]===t||i[o].listener&&i[o].listener===t){r=o;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,i){var r,s,n,a,o;o=navigator.userAgent.toLowerCase(),a=navigator.platform.toLowerCase(),n="ie"===(r=o.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(s={name:"version"===r[1]?r[3]:r[1],version:n||parseFloat("opera"===r[1]&&r[4]?r[4]:r[2]),platform:{name:o.match(/ip(?:ad|od|hone)/)?"ios":(o.match(/(?:webos|android)/)||a.match(/mac|win|linux/)||["other"])[0]}})[s.name]=!0,s[s.name+parseInt(s.version,10)]=!0,s.platform[s.platform.name]=!0,t.exports=s},{}],3:[function(e,t,i){var r,s,n,a={}.hasOwnProperty,o=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},h=[].slice;r=e("events").EventEmitter,n=e("./browser.coffee"),s=function(e){var t,i;function r(e){var i,r,s;for(r in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(e),t)s=t[r],null==(i=this.options)[r]&&(i[r]=s)}return function(e,t){for(var i in t)a.call(t,i)&&(e[i]=t[i]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(r,e),t={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},i={delay:500,copy:!1},r.prototype.setOption=function(e,t){if(this.options[e]=t,null!=this._canvas&&("width"===e||"height"===e))return this._canvas[e]=t},r.prototype.setOptions=function(e){var t,i,r;for(t in i=[],e)a.call(e,t)&&(r=e[t],i.push(this.setOption(t,r)));return i},r.prototype.addFrame=function(e,t){var r,s;for(s in null==t&&(t={}),(r={}).transparent=this.options.transparent,i)r[s]=t[s]||i[s];if(null==this.options.width&&this.setOption("width",e.width),null==this.options.height&&this.setOption("height",e.height),"undefined"!=typeof ImageData&&null!==ImageData&&e instanceof ImageData)r.data=e.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&e instanceof WebGLRenderingContext)t.copy?r.data=this.getContextData(e):r.context=e;else{if(null==e.childNodes)throw new Error("Invalid image");t.copy?r.data=this.getImageData(e):r.image=e}return this.frames.push(r)},r.prototype.render=function(){var e,t,i;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var e,t,i;for(i=[],e=0,t=this.frames.length;0<=t?e<t:e>t;0<=t?++e:--e)i.push(null);return i}.call(this),t=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(e=0,i=t;0<=i?e<i:e>i;0<=i?++e:--e)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},r.prototype.abort=function(){for(var e;null!=(e=this.activeWorkers.shift());)this.log("killing active worker"),e.terminate();return this.running=!1,this.emit("abort")},r.prototype.spawnWorkers=function(){var e,t,i,r;return e=Math.min(this.options.workers,this.frames.length),function(){i=[];for(var r=t=this.freeWorkers.length;t<=e?r<e:r>e;t<=e?r++:r--)i.push(r);return i}.apply(this).forEach((r=this,function(e){var t;return r.log("spawning worker "+e),(t=new Worker(r.options.workerScript)).onmessage=function(e){return r.activeWorkers.splice(r.activeWorkers.indexOf(t),1),r.freeWorkers.push(t),r.frameFinished(e.data)},r.freeWorkers.push(t)})),e},r.prototype.frameFinished=function(e){var t,i;if(this.log("frame "+e.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[e.index]=e,!0===this.options.globalPalette&&(this.options.globalPalette=e.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(t=1,i=this.freeWorkers.length;1<=i?t<i:t>i;1<=i?++t:--t)this.renderNextFrame();return o.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},r.prototype.finishRendering=function(){var e,t,i,r,s,n,a,o,h,l,d,p,u,f,c,v;for(o=0,s=0,h=(f=this.imageParts).length;s<h;s++)o+=((t=f[s]).data.length-1)*t.pageSize+t.cursor;for(o+=t.pageSize-t.cursor,this.log("rendering finished - filesize "+Math.round(o/1e3)+"kb"),e=new Uint8Array(o),p=0,n=0,l=(c=this.imageParts).length;n<l;n++)for(i=a=0,d=(v=(t=c[n]).data).length;a<d;i=++a)u=v[i],e.set(u,p),i===t.data.length-1?p+=t.cursor:p+=t.pageSize;return r=new Blob([e],{type:"image/gif"}),this.emit("finished",r,e)},r.prototype.renderNextFrame=function(){var e,t,i;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return e=this.frames[this.nextFrame++],i=this.freeWorkers.shift(),t=this.getTask(e),this.log("starting frame "+(t.index+1)+" of "+this.frames.length),this.activeWorkers.push(i),i.postMessage(t)},r.prototype.getContextData=function(e){return e.getImageData(0,0,this.options.width,this.options.height).data},r.prototype.getImageData=function(e){var t;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(t=this._canvas.getContext("2d")).setFill=this.options.background,t.fillRect(0,0,this.options.width,this.options.height),t.drawImage(e,0,0),this.getContextData(t)},r.prototype.getTask=function(e){var t,i;if(i={index:t=this.frames.indexOf(e),last:t===this.frames.length-1,delay:e.delay,transparent:e.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===n.name},null!=e.data)i.data=e.data;else if(null!=e.context)i.data=this.getContextData(e.context);else{if(null==e.image)throw new Error("Invalid frame");i.data=this.getImageData(e.image)}return i},r.prototype.log=function(){var e;if(e=1<=arguments.length?h.call(arguments,0):[],this.options.debug)return console.log.apply(console,e)},r}(r),t.exports=s},{"./browser.coffee":2,events:1}]},{},[3])(3)},99406:function(e){e.exports=function(){const e=[];return{_listeners:e,addListener:t=>{void 0===e.find((e=>t===e))?e.push(t):console.log(`listener already in event: ${t}`)},removeListener:t=>{void 0!==e.find((e=>t===e))?e.splice(e.indexOf(t),1):console.log(`listener not found: ${t}`)},invoke:t=>e.forEach((e=>e(t)))}}},96995:function(e,t,i){i(45456)()},45456:function(e,t,i){i(85276);const r=i(99406);e.exports=function(){let e=void 0===window.p5?i(94035):window.p5;if(void 0===e)return void console.error("p5.createLoop: p5 not found");const t=r(),s=r(),n=r();e.prototype.registerMethod("init",t.invoke),e.prototype.registerMethod("pre",s.invoke),e.prototype.registerMethod("post",n.invoke);const a=window.createLoop;function o(e={},t={}){const i=this,r={framesPerSecond:i._targetFrameRate||i._frameRate||60,duration:3,canvas:i.canvas};return void 0!==e&&isNaN(e)&&Object.assign(r,e),isNaN(e)||(r.duration=e),void 0!==t&&Object.assign(r,t),console.log(`creating ${r.duration} second loop at ${r.framesPerSecond} fps`),i.animLoop=a(r),i._isGlobal&&(window.animLoop=i.animLoop),s.addListener(i.animLoop.preRender),n.addListener(i.animLoop.postRender),i.animLoop}e.prototype.registerMethod("init",(function(){var e=this._setup;this._setup=t=>{this._isGlobal?window.createLoop=o:this.createLoop=o,e()}}))}},70021:function(e,t,i){var r;!function(){"use strict";var s=.5*(Math.sqrt(3)-1),n=(3-Math.sqrt(3))/6,a=1/6,o=(Math.sqrt(5)-1)/4,h=(5-Math.sqrt(5))/20;function l(e){var t;t="function"==typeof e?e:e?function(){var e=0,t=0,i=0,r=1,s=p();e=s(" "),t=s(" "),i=s(" ");for(var n=0;n<arguments.length;n++)(e-=s(arguments[n]))<0&&(e+=1),(t-=s(arguments[n]))<0&&(t+=1),(i-=s(arguments[n]))<0&&(i+=1);return s=null,function(){var s=2091639*e+2.3283064365386963e-10*r;return e=t,t=i,i=s-(r=0|s)}}(e):Math.random,this.p=d(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var i=0;i<512;i++)this.perm[i]=this.p[255&i],this.permMod12[i]=this.perm[i]%12}function d(e){var t,i=new Uint8Array(256);for(t=0;t<256;t++)i[t]=t;for(t=0;t<255;t++){var r=t+~~(e()*(256-t)),s=i[t];i[t]=i[r],i[r]=s}return i}function p(){var e=4022871197;return function(t){t=t.toString();for(var i=0;i<t.length;i++){var r=.02519603282416938*(e+=t.charCodeAt(i));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}l.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(e,t){var i,r,a=this.permMod12,o=this.perm,h=this.grad3,l=0,d=0,p=0,u=(e+t)*s,f=Math.floor(e+u),c=Math.floor(t+u),v=(f+c)*n,m=e-(f-v),g=t-(c-v);m>g?(i=1,r=0):(i=0,r=1);var b=m-i+n,y=g-r+n,w=m-1+2*n,x=g-1+2*n,_=255&f,k=255&c,F=.5-m*m-g*g;if(F>=0){var E=3*a[_+o[k]];l=(F*=F)*F*(h[E]*m+h[E+1]*g)}var L=.5-b*b-y*y;if(L>=0){var P=3*a[_+i+o[k+r]];d=(L*=L)*L*(h[P]*b+h[P+1]*y)}var C=.5-w*w-x*x;if(C>=0){var I=3*a[_+1+o[k+1]];p=(C*=C)*C*(h[I]*w+h[I+1]*x)}return 70*(l+d+p)},noise3D:function(e,t,i){var r,s,n,o,h,l,d,p,u,f,c=this.permMod12,v=this.perm,m=this.grad3,g=.3333333333333333*(e+t+i),b=Math.floor(e+g),y=Math.floor(t+g),w=Math.floor(i+g),x=(b+y+w)*a,_=e-(b-x),k=t-(y-x),F=i-(w-x);_>=k?k>=F?(h=1,l=0,d=0,p=1,u=1,f=0):_>=F?(h=1,l=0,d=0,p=1,u=0,f=1):(h=0,l=0,d=1,p=1,u=0,f=1):k<F?(h=0,l=0,d=1,p=0,u=1,f=1):_<F?(h=0,l=1,d=0,p=0,u=1,f=1):(h=0,l=1,d=0,p=1,u=1,f=0);var E=_-h+a,L=k-l+a,P=F-d+a,C=_-p+2*a,I=k-u+2*a,j=F-f+2*a,B=_-1+.5,M=k-1+.5,S=F-1+.5,D=255&b,G=255&y,q=255&w,A=.6-_*_-k*k-F*F;if(A<0)r=0;else{var z=3*c[D+v[G+v[q]]];r=(A*=A)*A*(m[z]*_+m[z+1]*k+m[z+2]*F)}var T=.6-E*E-L*L-P*P;if(T<0)s=0;else{var O=3*c[D+h+v[G+l+v[q+d]]];s=(T*=T)*T*(m[O]*E+m[O+1]*L+m[O+2]*P)}var R=.6-C*C-I*I-j*j;if(R<0)n=0;else{var N=3*c[D+p+v[G+u+v[q+f]]];n=(R*=R)*R*(m[N]*C+m[N+1]*I+m[N+2]*j)}var W=.6-B*B-M*M-S*S;if(W<0)o=0;else{var U=3*c[D+1+v[G+1+v[q+1]]];o=(W*=W)*W*(m[U]*B+m[U+1]*M+m[U+2]*S)}return 32*(r+s+n+o)},noise4D:function(e,t,i,r){var s,n,a,l,d,p,u,f,c,v,m,g,b,y,w,x,_,k=this.perm,F=this.grad4,E=(e+t+i+r)*o,L=Math.floor(e+E),P=Math.floor(t+E),C=Math.floor(i+E),I=Math.floor(r+E),j=(L+P+C+I)*h,B=e-(L-j),M=t-(P-j),S=i-(C-j),D=r-(I-j),G=0,q=0,A=0,z=0;B>M?G++:q++,B>S?G++:A++,B>D?G++:z++,M>S?q++:A++,M>D?q++:z++,S>D?A++:z++;var T=B-(p=G>=3?1:0)+h,O=M-(u=q>=3?1:0)+h,R=S-(f=A>=3?1:0)+h,N=D-(c=z>=3?1:0)+h,W=B-(v=G>=2?1:0)+2*h,U=M-(m=q>=2?1:0)+2*h,Q=S-(g=A>=2?1:0)+2*h,Z=D-(b=z>=2?1:0)+2*h,$=B-(y=G>=1?1:0)+3*h,H=M-(w=q>=1?1:0)+3*h,X=S-(x=A>=1?1:0)+3*h,V=D-(_=z>=1?1:0)+3*h,J=B-1+4*h,K=M-1+4*h,Y=S-1+4*h,ee=D-1+4*h,te=255&L,ie=255&P,re=255&C,se=255&I,ne=.6-B*B-M*M-S*S-D*D;if(ne<0)s=0;else{var ae=k[te+k[ie+k[re+k[se]]]]%32*4;s=(ne*=ne)*ne*(F[ae]*B+F[ae+1]*M+F[ae+2]*S+F[ae+3]*D)}var oe=.6-T*T-O*O-R*R-N*N;if(oe<0)n=0;else{var he=k[te+p+k[ie+u+k[re+f+k[se+c]]]]%32*4;n=(oe*=oe)*oe*(F[he]*T+F[he+1]*O+F[he+2]*R+F[he+3]*N)}var le=.6-W*W-U*U-Q*Q-Z*Z;if(le<0)a=0;else{var de=k[te+v+k[ie+m+k[re+g+k[se+b]]]]%32*4;a=(le*=le)*le*(F[de]*W+F[de+1]*U+F[de+2]*Q+F[de+3]*Z)}var pe=.6-$*$-H*H-X*X-V*V;if(pe<0)l=0;else{var ue=k[te+y+k[ie+w+k[re+x+k[se+_]]]]%32*4;l=(pe*=pe)*pe*(F[ue]*$+F[ue+1]*H+F[ue+2]*X+F[ue+3]*V)}var fe=.6-J*J-K*K-Y*Y-ee*ee;if(fe<0)d=0;else{var ce=k[te+1+k[ie+1+k[re+1+k[se+1]]]]%32*4;d=(fe*=fe)*fe*(F[ce]*J+F[ce+1]*K+F[ce+2]*Y+F[ce+3]*ee)}return 27*(s+n+a+l+d)}},l._buildPermutationTable=d,void 0===(r=function(){return l}.call(t,i,t,e))||(e.exports=r),t.SimplexNoise=l,e.exports=l}()}}]);