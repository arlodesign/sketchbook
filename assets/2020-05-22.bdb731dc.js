(self.webpackChunksketchbook=self.webpackChunksketchbook||[]).push([[3783],{88040:function(t,e,n){"use strict";var a=n(94035),r=n.n(a),i=n(4022),s=n.n(i),u=n(45456),o=n.n(u),h=n(58891);window.p5=r(),o()(),new(r())((function(t){var e,n,a=t.getURLParams().render;t.setup=function(){t.pixelDensity(1),t.frameRate(30),t.createCanvas(t.windowWidth/2,t.windowHeight/2),t.background(255),t.createLoop(20,{gif:!!a&&{render:!1,open:!0},noiseRadius:.1}),t.noSmooth(),(e=t.createGraphics(t.width,t.height)).colorMode(t.HSB,1),n=t.createImage(t.width,t.height)},t.draw=function(){var a=t.animLoop,r=(a.theta,a.noise1D),i=a.noise2D;e.background(255),e.noFill(),e.strokeWeight(e.width/20),e.push(),e.translate(t.width/2,t.height/2);for(var u=1;u<=20;u++)e.stroke(t.abs(i(u/200,.01)),1,1,.5),e.circle(-t.width/2,0,t.height*(u/20*2)*(0,h.easeInOutQuart)(t.abs(r(u)))+t.width/10);e.pop();var o=e.drawingContext.getImageData(0,0,t.width,t.height);(t.frameCount%4==0||1===t.frameCount)&&function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s()(a).fromImageData(e).toDataURL().then((function(e){n=null,n=t.loadImage(e)}))}(o,{quality:99}),t.blendMode(t.BLEND),t.background(255),t.image(e,0,0,t.width,t.height),t.blendMode(t.HARD_LIGHT),t.image(n,0,0,t.width,t.height)},t.windowResized=function(){t.resizeCanvas(t.windowWidth,t.windowHeight)}}),"sketch")},58891:function(t,e,n){"use strict";n.r(e),n.d(e,{linear:function(){return a},easeInQuad:function(){return r},easeOutQuad:function(){return i},easeInOutQuad:function(){return s},easeInCubic:function(){return u},easeOutCubic:function(){return o},easeInOutCubic:function(){return h},easeInQuart:function(){return c},easeOutQuart:function(){return d},easeInOutQuart:function(){return g},easeInQuint:function(){return f},easeOutQuint:function(){return m},easeInOutQuint:function(){return l}});var a=function(t){return t},r=function(t){return t*t},i=function(t){return t*(2-t)},s=function(t){return t<.5?2*t*t:(4-2*t)*t-1},u=function(t){return t*t*t},o=function(t){return--t*t*t+1},h=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},c=function(t){return t*t*t*t},d=function(t){return 1- --t*t*t*t},g=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},f=function(t){return t*t*t*t*t},m=function(t){return 1+--t*t*t*t*t},l=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},4022:function(t){t.exports=function(){"use strict";var t={amount:35,iterations:20,quality:30,seed:25};function e(e){return"object"!=typeof(e=function(t){var e=!1;if(void 0!==t)try{e=JSON.parse(JSON.stringify(t))}catch(t){}return e}(e))&&(e={}),Object.keys(t).filter((function(t){return"iterations"!==t})).forEach((function(n){var a,r,i;"number"!=typeof e[n]||isNaN(e[n])?e[n]=t[n]:e[n]=(a=e[n],i=100,a<(r=0)?r:a>i?i:a),e[n]=Math.round(e[n])})),("number"!=typeof e.iterations||isNaN(e.iterations)||e.iterations<=0)&&(e.iterations=t.iterations),e.iterations=Math.round(e.iterations),e}var n=function(t,e){void 0===t&&(t=300),void 0===e&&(e=150),"undefined"==typeof window?(this.canvasEl={width:t,height:e},this.ctx=null):(this.canvasEl=document.createElement("canvas"),this.canvasEl.width=t,this.canvasEl.height=e,this.ctx=this.canvasEl.getContext("2d"))},a={width:{configurable:!0},height:{configurable:!0}};function r(t){if(t instanceof HTMLImageElement){if(!t.naturalWidth||!t.naturalHeight||!1===t.complete)throw new Error("This this image hasn't finished loading: "+t.src);var e=new n(t.naturalWidth,t.naturalHeight),a=e.getContext("2d");a.drawImage(t,0,0,e.width,e.height);var r=a.getImageData(0,0,e.width,e.height);return r.data&&r.data.length&&(void 0===r.width&&(r.width=t.naturalWidth),void 0===r.height&&(r.height=t.naturalHeight)),r}throw new Error("This object does not seem to be an image.")}n.prototype.getContext=function(){return this.ctx},n.prototype.toDataURL=function(t,e,n){if("function"!=typeof n)return this.canvasEl.toDataURL(t,e);n(this.canvasEl.toDataURL(t,e))},a.width.get=function(){return this.canvasEl.width},a.width.set=function(t){this.canvasEl.width=t},a.height.get=function(){return this.canvasEl.height},a.height.set=function(t){this.canvasEl.height=t},Object.defineProperties(n.prototype,a),"undefined"!=typeof window&&(n.Image=Image);var i=n.Image;function s(t){return new Promise((function(e,n){var a=new i;a.onload=function(){e(a)},a.onerror=n;try{a.src=t}catch(t){n(t)}}))}function u(t,e,n,a){s(t).then(n,a)}function o(t){return{width:t.width||t.naturalWidth,height:t.height||t.naturalHeight}}function h(t,e,a,r){s(t).then((function(t){var e=o(t),r=function(t){var e=o(t),a=new n(e.width,e.height),r=a.getContext("2d");return r.drawImage(t,0,0,e.width,e.height),{canvas:a,ctx:r}}(t).ctx.getImageData(0,0,e.width,e.height);r.width||(r.width=e.width),r.height||(r.height=e.height),a(r)}),r)}var c=Object.assign;return function(t){var a,i;t=e(t);var s=new Worker(URL.createObjectURL(new Blob(["function isImageData ( imageData ) {\n\treturn (\n\t\timageData && \n\t\ttypeof imageData.width === 'number' &&\n\t\ttypeof imageData.height === 'number' &&\n\t\timageData.data &&\n\t\ttypeof imageData.data.length === 'number' &&\n\t\ttypeof imageData.data === 'object'\n\t);\n}\n\nvar base64Chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nvar base64Map$1 = base64Chars.split( '' );\nvar reversedBase64Map$1 = { };\n\nbase64Map$1.forEach( function ( val, key ) { reversedBase64Map$1[val] = key; } );\n\nvar maps = {\n\tbase64Map: base64Map$1,\n\treversedBase64Map: reversedBase64Map$1\n};\n\nvar reversedBase64Map = maps.reversedBase64Map;\n\n// https://github.com/mutaphysis/smackmyglitchupjs/blob/master/glitch.html\n// base64 is 2^6, byte is 2^8, every 4 base64 values create three bytes\nfunction base64ToByteArray ( base64URL ) {\t\n\tvar result = [ ];\n\tvar prev;\n\n\tvar srcURL = base64URL.replace( 'data:image/jpeg;base64,', '' );\n\n\tfor ( var i = 0, len = srcURL.length; i < len; i++ ) {\n\t\tsrcURL[ i ];\n\t\tvar currentChar = reversedBase64Map[ srcURL[ i ] ];\n\t\tvar digitNum = i % 4;\n\n\t\tswitch ( digitNum ) {\n\t\t\t// case 0: first digit - do nothing, not enough info to work with\n\t\t\tcase 1: // second digit\n\t\t\t\tresult.push( prev << 2 | currentChar >> 4 );\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 2: // third digit\n\t\t\t\tresult.push( ( prev & 0x0f ) << 4 | currentChar >> 2 );\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 3: // fourth digit\n\t\t\t\tresult.push( ( prev & 3 ) << 6 | currentChar );\n\t\t\t\tbreak;\n\t\t}\n\n\t\tprev = currentChar;\n\t}\n\n\treturn result;\n}\n\n// http://stackoverflow.com/a/10424014/229189\n\nfunction jpgHeaderLength ( byteArr ) {\n\tvar result = 417;\n\n\t// https://en.wikipedia.org/wiki/JPEG#Syntax_and_structure\n\t// looks for the first occurence of 0xFF, 0xDA in the byteArray\n\t// which is the start of scan\n\tfor ( var i = 0, len = byteArr.length; i < len; i++ ) {\n\t\tif ( byteArr[i] === 0xFF && byteArr[i + 1] === 0xDA ) {\n\t\t\tresult = i + 2;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction glitchByteArray ( byteArray, seed, amount, iterationCount ) {\n\tvar headerLength = jpgHeaderLength( byteArray );\n\tvar maxIndex = byteArray.length - headerLength - 4;\n\n\tvar amountPercent = amount / 100;\n\tvar seedPercent   = seed / 100;\n\n\tfor ( var iterationIndex = 0; iterationIndex < iterationCount; iterationIndex++ ) {\n\t\tvar minPixelIndex = ( maxIndex / iterationCount * iterationIndex ) | 0;\n\t\tvar maxPixelIndex = ( maxIndex / iterationCount * ( iterationIndex + 1 ) ) | 0;\n\t\t\n\t\tvar delta = maxPixelIndex - minPixelIndex;\n\t\tvar pixelIndex = ( minPixelIndex + delta * seedPercent ) | 0;\n\n\t\tif ( pixelIndex > maxIndex ) {\n\t\t\tpixelIndex = maxIndex;\n\t\t}\n\n\t\tvar indexInByteArray = ~~( headerLength + pixelIndex );\n\n\t\tbyteArray[indexInByteArray] = ~~( amountPercent * 256 );\n\t}\n\n\treturn byteArray;\n}\n\nvar base64Map = maps.base64Map;\n\nfunction byteArrayToBase64 ( byteArray ) {\n\tvar result = [ 'data:image/jpeg;base64,' ];\n\tvar byteNum;\n\tvar previousByte;\n\n\tfor ( var i = 0, len = byteArray.length; i < len; i++ ) {\n\t\tvar currentByte = byteArray[i];\n\t\tbyteNum = i % 3;\n\n\t\tswitch ( byteNum ) {\n\t\t\tcase 0: // first byte\n\t\t\t\tresult.push( base64Map[ currentByte >> 2 ] );\n\t\t\t\tbreak;\n\t\t\tcase 1: // second byte\n\t\t\t\tresult.push( base64Map[( previousByte & 3 ) << 4 | ( currentByte >> 4 )] );\n\t\t\t\tbreak;\n\t\t\tcase 2: // third byte\n\t\t\t\tresult.push( base64Map[( previousByte & 0x0f ) << 2 | ( currentByte >> 6 )] );\n\t\t\t\tresult.push( base64Map[currentByte & 0x3f] );\n\t\t\t\tbreak;\n\t\t}\n\n\t\tpreviousByte = currentByte;\n\t}\n\n\tif ( byteNum === 0 ) {\n\t\tresult.push( base64Map[( previousByte & 3 ) << 4] );\n\t\tresult.push( '==' );\n\t} else {\n\t\tif ( byteNum === 1 ) {\n\t\t\tresult.push( base64Map[( previousByte & 0x0f ) << 2] );\n\t\t\tresult.push( '=' );\n\t\t}\n\t}\n\n\treturn result.join( '' );\n}\n\nfunction glitchImageData ( imageData, base64URL, params ) {\n\tif ( isImageData( imageData ) ) {\n\t\tvar byteArray = base64ToByteArray( base64URL );\n\t\tvar glitchedByteArray = glitchByteArray( byteArray, params.seed, params.amount, params.iterations );\n\t\tvar glitchedBase64URL = byteArrayToBase64( glitchedByteArray );\n\t\treturn glitchedBase64URL;\n\t} else {\n\t\tthrow new Error( 'glitchImageData: imageData seems to be corrupt.' );\n\t}\n}\n\nonmessage = function (msg) {\n\tvar imageData = msg.data.imageData;\n\tvar params = msg.data.params;\n\tvar base64URL = msg.data.base64URL;\n\n\tif ( imageData && base64URL && params ) {\n\t\ttry {\n\t\t\t// phantomjs seems to have some memory loss so we need to make sure\n\t\t\tif ( typeof imageData.width === 'undefined' && typeof msg.data.imageDataWidth === 'number' ) {\n\t\t\t\timageData.width = msg.data.imageDataWidth;\n\t\t\t}\n\n\t\t\tif ( typeof imageData.height === 'undefined' && typeof msg.data.imageDataHeight === 'number' ) {\n\t\t\t\timageData.height = msg.data.imageDataHeight;\n\t\t\t}\n\n\t\t\tvar glitchedBase64URL = glitchImageData( imageData, base64URL, params );\n\t\t\tsuccess( glitchedBase64URL );\n\n\t\t} catch ( err ) {\n\t\t\tfail( err );\n\t\t}\n\n\t} else {\n\t\tif ( msg.data.imageData ) {\n\t\t\tfail( 'Parameters are missing.' );\n\t\t} else {\n\t\t\tfail( 'ImageData is missing.' );\n\t\t}\n\t}\n\t\n\tself.close();\n};\n\nfunction fail ( err ) {\n\tself.postMessage( { err: err.message || err } );\n}\n\nfunction success ( base64URL ) {\n\tself.postMessage( { base64URL: base64URL } );\n}\n"],{type:"text/javascript"}))),o={getParams:function(){return t},getInput:f,getOutput:m},d={fromImageData:function(t){return p(l,t)},fromImage:function(t){return p(r,t)}},g={toImage:function(t){return b(u,t,!0)},toDataURL:function(t){return b(l)},toImageData:function(t){return b(h,t,!0)}};function f(){var t=c({},o);return a||c(t,d),t}function m(){var t=c({},o);return i||c(t,g),t}function l(t){return t}function p(t,e,n){return a=function(){return new Promise((function(a,r){if(n)t(e,a,r);else if(t===l)a(e);else try{a(t(e,a,r))}catch(t){r(t)}}))},v()?y():m()}function b(t,e,n){return i=function(a){return new Promise((function(r,i){n?t(a,e,r,i):t===l?r(a):t(a,e).then(r,i)}))},v()?y():f()}function v(){return a&&i}function y(){return new Promise((function(e,r){a().then((function(e){return function(t,e){return new Promise((function(a,r){(function(t,e){return new Promise((function(a,r){if(function(t){return t&&"number"==typeof t.width&&"number"==typeof t.height&&t.data&&"number"==typeof t.data.length&&"object"==typeof t.data}(t)){var i=new n(t.width,t.height);i.getContext("2d").putImageData(t,0,0),a(i.toDataURL("image/jpeg",e/100))}else r(new Error("object is not valid imageData"))}))})(t,e.quality).then((function(n){return function(t,e,n){return new Promise((function(a,r){s.addEventListener("message",(function(t){t.data&&t.data.base64URL?a(t.data.base64URL):t.data&&t.data.err?r(t.data.err):r(t)})),s.postMessage({params:n,base64URL:e,imageData:t,imageDataWidth:t.width,imageDataHeight:t.height})}))}(t,n,e)}),r).then(a,r)}))}(e,t)}),r).then((function(t){i(t).then(e,r)}),r)}))}return f()}}()}},function(t){t.O(0,[4035,5456],(function(){return 88040,t(t.s=88040)})),t.O()}]);