{"version":3,"sources":["webpack:///./src/pages/sketch/2019/12/25.js"],"names":["sketch","p","img","step","x","px","preload","loadImage","withPrefix","setup","pixelDensity","createCanvas","background","image","width","height","loadPixels","i","pixels","length","values","slice","color","push","lightness","hue","draw","swap","temp","j","col","y","get","sort","a","b","hueA","hueB","abs","saturation","forEach","c","set","noLoop","updatePixels","location","path","pathname","description"],"mappings":"2jBAIA,IAAMA,EAAS,SAASC,GACtB,IAAIC,EACAC,EAAO,EACPC,EAAI,EACJC,EAAK,GAETJ,EAAEK,QAAU,WACVJ,EAAMD,EAAEM,UAAUC,qBAAW,6BAG/BP,EAAEQ,MAAQ,WACRR,EAAES,aAAa,GACfT,EAAEU,aAAa,IAAS,KACxBV,EAAEW,WAAW,KACbX,EAAEY,MAAMX,EAAK,EAAG,EAAGD,EAAEa,MAAOb,EAAEc,QAE9Bd,EAAEe,aAEF,IAAK,IAAIC,EAAI,EAAGA,EAAIhB,EAAEiB,OAAOC,OAAS,EAAGF,GAAK,EAAG,CAC/C,IAAMG,EAASnB,EAAEiB,OAAOG,MAAMJ,EAAGA,EAAI,GAC/BK,EAAQrB,EAAEqB,MAAF,MAAArB,EAAC,EAAUmB,IACzBf,EAAGkB,KAAK,CACNH,SACAI,UAAWvB,EAAEuB,UAAUF,GACvBG,IAAKxB,EAAEwB,IAAIH,OAKjBrB,EAAEyB,KAAO,WAGP,GAFAzB,EAAEe,aAEW,IAATb,EAAY,CAGd,IAFA,IAAIwB,GAAO,EAEFV,EAAI,EAAGA,EAAIZ,EAAGc,OAAS,EAAGF,IACjC,GAAIZ,EAAGY,GAAGO,UAAYnB,EAAGY,EAAI,GAAGO,UAAW,CACzC,IAAMI,EAAOvB,EAAGY,EAAI,GACpBZ,EAAGY,EAAI,GAAKZ,EAAGY,GACfZ,EAAGY,GAAKW,EAER,IAAK,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IACrB5B,EAAEiB,OAAW,EAAJD,EAAQY,GAAKxB,EAAGY,GAAGG,OAAOS,GACnC5B,EAAEiB,OAAiB,GAATD,EAAI,GAASY,GAAKxB,EAAGY,EAAI,GAAGG,OAAOS,GAG/CF,GAAO,EAINA,IAAMxB,EAAO,GAGpB,GAAa,IAATA,EAAY,CAEd,IADA,IAAI2B,EAAM,GACDC,EAAI,EAAGA,EAAI9B,EAAEc,OAAQgB,IAC5BD,EAAIP,KAAKtB,EAAE+B,IAAI5B,EAAG2B,IAEpBD,EACGG,MAAK,SAACC,EAAGC,GACR,IAAMC,EAAOnC,EAAEwB,IAAIxB,EAAEqB,MAAF,MAAArB,EAAC,EAAUiC,KACxBG,EAAOpC,EAAEwB,IAAIxB,EAAEqB,MAAF,MAAArB,EAAC,EAAUkC,KAE9B,OAAIlC,EAAEqC,IAAIF,EAAOC,GAAQ,EAChBpC,EAAEsC,WAAWtC,EAAEqB,MAAF,MAAArB,EAAC,EAAUiC,KAAMjC,EAAEsC,WAAWtC,EAAEqB,MAAF,MAAArB,EAAC,EAAUkC,KAEtDC,EAAOC,KAGjBG,SAAQ,SAACC,EAAGxB,GACXhB,EAAEyC,IAAItC,EAAGa,EAAGhB,EAAEqB,MAAF,MAAArB,EAAC,EAAUwC,UAG3BrC,IAEUH,EAAEa,OAAOb,EAAE0C,SAGvB1C,EAAE2C,iBAIS,0BAAGC,EAAH,EAAGA,SAAH,OACb,YAAC,IAAD,CAAc7C,OAAQA,EAAQ8C,KAAMD,EAASE,SAAUC,YAAY","file":"component---src-pages-sketch-2019-12-25-js-ebc108875bb491d64b00.js","sourcesContent":["import React from \"react\";\nimport SketchLayout from \"~components/sketch-layout\";\nimport { withPrefix } from \"gatsby\";\n\nconst sketch = function(p) {\n  let img;\n  let step = 0;\n  let x = 0;\n  let px = [];\n\n  p.preload = function() {\n    img = p.loadImage(withPrefix(\"/assets/uglysweater.png\"));\n  };\n\n  p.setup = function() {\n    p.pixelDensity(1);\n    p.createCanvas(660 / 4, 840 / 4);\n    p.background(255);\n    p.image(img, 0, 0, p.width, p.height);\n\n    p.loadPixels();\n\n    for (let i = 0; i < p.pixels.length - 4; i += 4) {\n      const values = p.pixels.slice(i, i + 4);\n      const color = p.color(...values);\n      px.push({\n        values,\n        lightness: p.lightness(color),\n        hue: p.hue(color),\n      });\n    }\n  };\n\n  p.draw = function() {\n    p.loadPixels();\n\n    if (step === 0) {\n      let swap = false;\n\n      for (let i = 0; i < px.length - 1; i++) {\n        if (px[i].lightness < px[i + 1].lightness) {\n          const temp = px[i + 1];\n          px[i + 1] = px[i];\n          px[i] = temp;\n\n          for (let j = 0; j < 4; j++) {\n            p.pixels[i * 4 + j] = px[i].values[j];\n            p.pixels[(i + 1) * 4 + j] = px[i + 1].values[j];\n          }\n\n          swap = true;\n        }\n      }\n\n      if (!swap) step = 1;\n    }\n\n    if (step === 1) {\n      let col = [];\n      for (let y = 0; y < p.height; y++) {\n        col.push(p.get(x, y));\n      }\n      col\n        .sort((a, b) => {\n          const hueA = p.hue(p.color(...a));\n          const hueB = p.hue(p.color(...b));\n\n          if (p.abs(hueA - hueB) < 5) {\n            return p.saturation(p.color(...a)) - p.saturation(p.color(...b));\n          } else {\n            return hueA - hueB;\n          }\n        })\n        .forEach((c, i) => {\n          p.set(x, i, p.color(...c));\n        });\n\n      x++;\n\n      if (x === p.width) p.noLoop();\n    }\n\n    p.updatePixels();\n  };\n};\n\nexport default ({ location }) => (\n  <SketchLayout sketch={sketch} path={location.pathname} description=\"\" />\n);\n"],"sourceRoot":""}