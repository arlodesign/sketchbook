{"version":3,"sources":["webpack:///./src/lib/easing.js","webpack:///./src/pages/sketch/2020/03/29.js"],"names":["linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","sketch","p","size","socialDistance","particles","id","moved","Particle","x","y","this","pos","createVector","dir","random","acc","trails","color","setAlpha","draw","noStroke","fill","forEach","ellipse","repulsors","r","height","width","concat","filter","dist","sort","aPos","bPos","update","cp","unshift","slice","direction","p5","Vector","sub","rotate","PI","normalize","add","force","mult","mag","ease","setMag","isOnCanvas","mouseX","mouseY","pushParticle","push","mousePressed","mouseDragged","touchMoved","setup","pixelDensity","frameRate","createCanvas","noSmooth","background","frameCount","particle","location","path","pathname","description"],"mappings":"6FAAA,2kBAGA,IAAMA,EAAS,SAAAC,GAAC,OAAIA,GAGdC,EAAa,SAAAD,GAAC,OAAIA,EAAIA,GAGtBE,EAAc,SAAAF,GAAC,OAAIA,GAAK,EAAIA,IAG5BG,EAAgB,SAAAH,GAAC,OAAKA,EAAI,GAAM,EAAIA,EAAIA,GAAU,EAAI,EAAIA,GAAKA,EAAlB,GAG7CI,EAAc,SAAAJ,GAAC,OAAIA,EAAIA,EAAIA,GAG3BK,EAAe,SAAAL,GAAC,QAAMA,EAAIA,EAAIA,EAAI,GAGlCM,EAAiB,SAAAN,GAAC,OACtBA,EAAI,GAAM,EAAIA,EAAIA,EAAIA,GAAKA,EAAI,IAAM,EAAIA,EAAI,IAAM,EAAIA,EAAI,GAAK,GAG5DO,EAAc,SAAAP,GAAC,OAAIA,EAAIA,EAAIA,EAAIA,GAG/BQ,EAAe,SAAAR,GAAC,OAAI,KAAMA,EAAIA,EAAIA,EAAIA,GAGtCS,EAAiB,SAAAT,GAAC,OACtBA,EAAI,GAAM,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,EAAI,IAAMA,EAAIA,EAAIA,EAAIA,GAGhDU,EAAc,SAAAV,GAAC,OAAIA,EAAIA,EAAIA,EAAIA,EAAIA,GAGnCW,EAAe,SAAAX,GAAC,OAAI,IAAMA,EAAIA,EAAIA,EAAIA,EAAIA,GAG1CY,EAAiB,SAAAZ,GAAC,OACtBA,EAAI,GAAM,GAAKA,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,EAAI,KAAOA,EAAIA,EAAIA,EAAIA,EAAIA,I,q7BCrChE,IAAMa,EAAS,SAASC,GACtB,IAAIC,EAAO,EACPC,EAAiB,EACjBC,EAAY,GACZC,EAAK,EACLC,EAAQ,EAENC,EAPmB,WAQvB,WAAYC,EAAGC,GACbC,KAAKL,KAAOA,EACZK,KAAKC,IAAMV,EAAEW,aAAaJ,EAAGC,GAC7BC,KAAKG,IAAMZ,EAAEW,aACXX,EAAEa,OAAO,CAAC,KAAO,MACjBb,EAAEa,OAAO,CAAC,KAAO,OAEnBJ,KAAKK,IAAMd,EAAEW,eACbF,KAAKM,OAAS,GACdN,KAAKO,MAAQhB,EAAEgB,MAAM,CAAC,aAAc,YAAa,SAASP,KAAKL,GAAK,IACpEK,KAAKO,MAAMC,SAAS,KAlBC,2BAoBvBC,KAAA,WACElB,EAAEmB,WACFnB,EAAEoB,KAAK,GAAI,IACXX,KAAKM,OAAOM,SAAQ,SAAAX,GAAG,OAAIV,EAAEsB,QAAF,MAAAtB,EAAC,EAAYU,GAAZ,QAAiBT,QAE7CD,EAAEoB,KAAKX,KAAKO,OACZhB,EAAEsB,QAAQb,KAAKC,IAAIH,EAAGE,KAAKC,IAAIF,EAAGP,IA1Bb,EA8BvBsB,UAAA,WAAa,IAAD,OACNC,EAAI,CACN,IAAIlB,EAASG,KAAKC,IAAIH,EAAG,GACzB,IAAID,EAASG,KAAKC,IAAIH,EAAGP,EAAEyB,QAC3B,IAAInB,EAAS,EAAGG,KAAKC,IAAIF,GACzB,IAAIF,EAASN,EAAE0B,MAAOjB,KAAKC,IAAIF,IAC/BmB,OAAOxB,GAaT,OAZAqB,EAAIA,EACDI,QAAO,qBAAGxB,KAAgB,EAAKA,MAC/BwB,QACC,gBAAGlB,EAAH,EAAGA,IAAH,OACEV,EAAE6B,KAAKnB,EAAIH,EAAGG,EAAIF,EAAG,EAAKE,IAAIH,EAAG,EAAKG,IAAIF,GAAKN,KAElD4B,MACC,kBAAQC,EAAR,EAAGrB,IAAoBsB,EAAvB,EAAkBtB,IAAlB,OACEV,EAAE6B,KAAKE,EAAKxB,EAAGwB,EAAKvB,EAAG,EAAKE,IAAIH,EAAG,EAAKG,IAAIF,GAC5CR,EAAE6B,KAAKG,EAAKzB,EAAGyB,EAAKxB,EAAG,EAAKE,IAAIH,EAAG,EAAKG,IAAIF,MAC9C,IA/CiB,EAmDvByB,OAAA,WACE,IAAMC,EAAKzB,KAAKc,YAIhB,GAHAd,KAAKM,OAAOoB,QAAQ,CAAC1B,KAAKC,IAAIH,EAAGE,KAAKC,IAAIF,IAC1CC,KAAKM,OAASN,KAAKM,OAAOqB,MAAM,EAAG,GAE/BF,EAAI,CACN7B,IAEA,IAAMgC,EAAYC,GAAGC,OAAOC,IAAIN,EAAGxB,IAAKD,KAAKC,KAC7C2B,EAAUI,OAAOzC,EAAE0C,IACnBL,EAAUM,YACVlC,KAAKG,IAAIgC,IAAIP,GACb5B,KAAKG,IAAI+B,YACTlC,KAAKC,IAAIkC,IAAInC,KAAKG,KAElB,IAAMiC,EAAQP,GAAGC,OAAOO,KAAKrC,KAAKG,IAAKH,KAAKC,KACtCmB,EAAO7B,EAAE6B,KAAKK,EAAGxB,IAAIH,EAAG2B,EAAGxB,IAAIF,EAAGC,KAAKC,IAAIH,EAAGE,KAAKC,IAAIF,GACvDuC,EAAMC,uBAAM9C,EAAiB2B,GAAQ3B,GAC3C2C,EAAMI,OAAOF,GACbtC,KAAKK,IAAI8B,IAAIC,GAEbpC,KAAKC,IAAIkC,IAAInC,KAAKK,UAElBL,KAAKG,IAAMZ,EAAEW,aAAa,EAAG,GAC7BF,KAAKK,IAAMd,EAAEW,gBA3EM,KAgFzB,SAASuC,IACP,OACElD,EAAEmD,QAAU,GACZnD,EAAEoD,QAAU,GACZpD,EAAEmD,QAAUnD,EAAE0B,OACd1B,EAAEoD,QAAUpD,EAAEyB,OAIlB,SAAS4B,IACPH,GAAc/C,EAAUmD,KAAK,IAAIhD,EAASN,EAAEmD,OAAQnD,EAAEoD,SAGxDpD,EAAEuD,aAAeF,EACjBrD,EAAEwD,aAAeH,EACjBrD,EAAEyD,WAAa,WAEb,OADAJ,KACQH,GAGVlD,EAAE0D,MAAQ,WACR1D,EAAE2D,aAAa,GACf3D,EAAE4D,UAAU,IACZ5D,EAAE6D,aAAa,IAAK,KACpB7D,EAAE8D,WACF3D,EAAUmD,KAAK,IAAIhD,EAASN,EAAE0B,MAAQ,EAAG1B,EAAEyB,OAAS,IACpDxB,EAAOD,EAAE0B,MAAQ,GACjBxB,GAAkBF,EAAE0B,MAAQ,GAG9B1B,EAAEkB,KAAO,WACPlB,EAAE+D,WAAW,KAEb1D,EAAQ,EAEJL,EAAEgE,WAAa,KAAQ,GACzB7D,EAAUmD,KAAK,IAAIhD,EAASN,EAAE0B,MAAQ,EAAG1B,EAAEyB,OAAS,IAGtDtB,EAAUkB,SAAQ,SAAA4C,GAChBA,EAAShC,SACTgC,EAAS/C,UAEG,IAAVb,IAEFF,EAAYA,EAAUyB,QACpB,gBAAGlB,EAAH,EAAGA,IAAH,OACEA,EAAIH,GAAMN,EAAO,GACjBS,EAAIH,EAAIP,EAAE0B,MAAQzB,EAAO,GACzBS,EAAIF,GAAMP,EAAO,GACjBS,EAAIF,EAAIR,EAAEyB,OAASxB,EAAO,QAMrB,0BAAGiE,EAAH,EAAGA,SAAH,OACb,YAAC,IAAD,CACEnE,OAAQA,EACRoE,KAAMD,EAASE,SACfC,YAAY","file":"component---src-pages-sketch-2020-03-29-js-22eca56466b2f775a89e.js","sourcesContent":["// https://gist.github.com/gre/1650294\n\n// no easing, no acceleration\nconst linear = t => t;\n\n// accelerating from zero velocity\nconst easeInQuad = t => t * t;\n\n// decelerating to zero velocity\nconst easeOutQuad = t => t * (2 - t);\n\n// acceleration until halfway, then deceleration\nconst easeInOutQuad = t => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t);\n\n// accelerating from zero velocity\nconst easeInCubic = t => t * t * t;\n\n// decelerating to zero velocity\nconst easeOutCubic = t => --t * t * t + 1;\n\n// acceleration until halfway, then deceleration\nconst easeInOutCubic = t =>\n  t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n\n// accelerating from zero velocity\nconst easeInQuart = t => t * t * t * t;\n\n// decelerating to zero velocity\nconst easeOutQuart = t => 1 - --t * t * t * t;\n\n// acceleration until halfway, then deceleration\nconst easeInOutQuart = t =>\n  t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n\n// accelerating from zero velocity\nconst easeInQuint = t => t * t * t * t * t;\n\n// decelerating to zero velocity\nconst easeOutQuint = t => 1 + --t * t * t * t * t;\n\n// acceleration until halfway, then deceleration\nconst easeInOutQuint = t =>\n  t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n\nexport {\n  linear,\n  easeInQuad,\n  easeOutQuad,\n  easeInOutQuad,\n  easeInCubic,\n  easeOutCubic,\n  easeInOutCubic,\n  easeInQuart,\n  easeOutQuart,\n  easeInOutQuart,\n  easeInQuint,\n  easeOutQuint,\n  easeInOutQuint,\n};\n","import React from \"react\";\nimport SketchLayout from \"~components/sketch-layout\";\nimport \"p5.createloop\";\nimport { easeOutQuad as ease } from \"~lib/easing\";\n\nconst sketch = function(p) {\n  let size = 0;\n  let socialDistance = 0;\n  let particles = [];\n  let id = 0;\n  let moved = 0;\n\n  class Particle {\n    constructor(x, y) {\n      this.id = ++id;\n      this.pos = p.createVector(x, y);\n      this.dir = p.createVector(\n        p.random([0.01, -0.01]),\n        p.random([0.01, -0.01])\n      );\n      this.acc = p.createVector();\n      this.trails = [];\n      this.color = p.color([\"lightgreen\", \"darkgreen\", \"green\"][this.id % 3]);\n      this.color.setAlpha(128);\n    }\n    draw() {\n      p.noStroke();\n      p.fill(96, 32);\n      this.trails.forEach(pos => p.ellipse(...pos, size));\n\n      p.fill(this.color);\n      p.ellipse(this.pos.x, this.pos.y, size);\n\n      // p.text(this.id, this.pos.x, this.pos.y);\n    }\n    repulsors() {\n      let r = [\n        new Particle(this.pos.x, 0),\n        new Particle(this.pos.x, p.height),\n        new Particle(0, this.pos.y),\n        new Particle(p.width, this.pos.y),\n      ].concat(particles);\n      r = r\n        .filter(({ id }) => id !== this.id)\n        .filter(\n          ({ pos }) =>\n            p.dist(pos.x, pos.y, this.pos.x, this.pos.y) < socialDistance\n        )\n        .sort(\n          ({ pos: aPos }, { pos: bPos }) =>\n            p.dist(aPos.x, aPos.y, this.pos.x, this.pos.y) -\n            p.dist(bPos.x, bPos.y, this.pos.x, this.pos.y)\n        )[0];\n\n      return r;\n    }\n    update() {\n      const cp = this.repulsors();\n      this.trails.unshift([this.pos.x, this.pos.y]);\n      this.trails = this.trails.slice(0, 5);\n\n      if (cp) {\n        moved++;\n\n        const direction = p5.Vector.sub(cp.pos, this.pos);\n        direction.rotate(p.PI);\n        direction.normalize();\n        this.dir.add(direction);\n        this.dir.normalize();\n        this.pos.add(this.dir);\n\n        const force = p5.Vector.mult(this.dir, this.pos);\n        const dist = p.dist(cp.pos.x, cp.pos.y, this.pos.x, this.pos.y);\n        const mag = ease((socialDistance - dist) / socialDistance);\n        force.setMag(mag);\n        this.acc.add(force);\n\n        this.pos.add(this.acc);\n      } else {\n        this.dir = p.createVector(0, 0);\n        this.acc = p.createVector();\n      }\n    }\n  }\n\n  function isOnCanvas() {\n    return (\n      p.mouseX >= 0 &&\n      p.mouseY >= 0 &&\n      p.mouseX <= p.width &&\n      p.mouseY <= p.height\n    );\n  }\n\n  function pushParticle() {\n    isOnCanvas && particles.push(new Particle(p.mouseX, p.mouseY));\n  }\n\n  p.mousePressed = pushParticle;\n  p.mouseDragged = pushParticle;\n  p.touchMoved = function() {\n    pushParticle();\n    return !isOnCanvas;\n  };\n\n  p.setup = function() {\n    p.pixelDensity(1);\n    p.frameRate(30);\n    p.createCanvas(660, 660);\n    p.noSmooth();\n    particles.push(new Particle(p.width / 2, p.height / 2));\n    size = p.width / 20;\n    socialDistance += p.width / 8;\n  };\n\n  p.draw = function() {\n    p.background(128);\n\n    moved = 0;\n\n    if (p.frameCount % 100 === 0) {\n      particles.push(new Particle(p.width / 2, p.height / 2));\n    }\n\n    particles.forEach(particle => {\n      particle.update();\n      particle.draw();\n    });\n    if (moved === 0) {\n      // remove off-canvas particles for performance\n      particles = particles.filter(\n        ({ pos }) =>\n          pos.x > -(size / 2) &&\n          pos.x < p.width + size / 2 &&\n          pos.y > -(size / 2) &&\n          pos.y < p.height + size / 2\n      );\n    }\n  };\n};\n\nexport default ({ location }) => (\n  <SketchLayout\n    sketch={sketch}\n    path={location.pathname}\n    description=\"Click and drag to maintain social distancing.\"\n  />\n);\n"],"sourceRoot":""}