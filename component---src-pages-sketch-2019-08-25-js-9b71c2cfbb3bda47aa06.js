(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{"2PzF":function(t,e,r){"use strict";r("rE2o"),r("ioFf"),r("rGqo");function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(u){i=!0,o=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}var s=function(t){return"number"==typeof t},u=function(t){return t<0?0:t>1?1:t};function c(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("KKXr"),r("bWfx");var l=function(t,e){return[t[0],t[1],e]},h=r("o0o1"),f=r.n(h),d=(r("ls82"),function(){}),p=Symbol(),v=function(t){return null!=t&&"function"==typeof t[Symbol.iterator]},g=function(){function t(e){i(this,t),this.value=e}return a(t,[{key:"deref",value:function(){return this.value}}]),t}(),y=function(t){return new g(t)},m=function(t){return t instanceof g},b=function(t){return t instanceof g?t:new g(t)},w=function(t){return t instanceof g?t.deref():t},x=function(t,e){return null!=t&&"function"==typeof t[e]},k=function(t){return null!=t&&"function"!=typeof t&&void 0!==t.length};function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t){return(E="function"==typeof Symbol&&"symbol"===_(Symbol.iterator)?function(t){return _(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_(t)})(t)}function F(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}function P(t,e,r){return(P=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&j(i,r.prototype),i}).apply(null,arguments)}function O(t){var e="function"==typeof Map?new Map:void 0;return(O=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return P(t,arguments,L(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),j(n,t)})(t)}var I=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return void 0!==t?": "+t:""};return function(r){function n(r){return i(this,n),F(this,L(n).call(this,t(r)+e(r)))}return S(n,r),n}(O(Error))},A=I((function(){return"illegal arity"})),M=function(t){throw new A(t)},B=function(t){return 2===t.length?[void 0,t[1]]:3===t.length?[t[1],t[2]]:M(t.length)};function C(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],i=n[0],o=n[1],a=n[2],s=null==(e=B(e))[0]?i():e[0],u=e[1];return w(o(x(u,"$reduce")?u.$reduce(a,s):k(u)?D(a,s,u):z(a,s,u)))}var D=function(t,e,r){for(var n=0,i=r.length;n<i;n++)if(e=t(e,r[n]),m(e)){e=e.deref();break}return e},z=function(t,e,r){var n=!0,i=!1,o=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){if(e=t(e,a.value),m(e)){e=e.deref();break}}}catch(u){i=!0,o=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return e},G=function(t,e){return[t,function(t){return t},e]};function T(t){return t?c(t):G((function(){return[]}),(function(t,e){return t.push(e),t}))}var q=f.a.mark(N),R=f.a.mark(U);function N(t,e){var r,n,i,o,a,s,u,c,l,h;return f.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:r=t(T()),n=r[1],i=r[2],o=!0,a=!1,s=void 0,f.prev=6,u=e[Symbol.iterator]();case 8:if(o=(c=u.next()).done){f.next=19;break}if(l=c.value,h=i([],l),!m(h)){f.next=14;break}return f.delegateYield(w(n(h.deref())),"t0",13);case 13:return f.abrupt("return");case 14:if(!h.length){f.next=16;break}return f.delegateYield(h,"t1",16);case 16:o=!0,f.next=8;break;case 19:f.next=25;break;case 21:f.prev=21,f.t2=f.catch(6),a=!0,s=f.t2;case 25:f.prev=25,f.prev=26,o||null==u.return||u.return();case 28:if(f.prev=28,!a){f.next=31;break}throw s;case 31:return f.finish(28);case 32:return f.finish(25);case 33:return f.delegateYield(w(n([])),"t3",34);case 34:case"end":return f.stop()}}),q,null,[[6,21,25,33],[26,,28,32]])}function U(t,e){var r,n,i,o,a,s,u,c;return f.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:r=t([d,d,function(t,e){return e}])[2],n=!0,i=!1,o=void 0,l.prev=4,a=e[Symbol.iterator]();case 6:if(n=(s=a.next()).done){l.next=21;break}if(u=s.value,c=r(p,u),!m(c)){l.next=15;break}if((c=w(c.deref()))===p){l.next=14;break}return l.next=14,c;case 14:return l.abrupt("return");case 15:if(c===p){l.next=18;break}return l.next=18,c;case 18:n=!0,l.next=6;break;case 21:l.next=27;break;case 23:l.prev=23,l.t0=l.catch(4),i=!0,o=l.t0;case 27:l.prev=27,l.prev=28,n||null==a.return||a.return();case 30:if(l.prev=30,!i){l.next=33;break}throw o;case 33:return l.finish(30);case 34:return l.finish(27);case 35:case"end":return l.stop()}}),R,null,[[4,23,27,35],[28,,30,34]])}var W=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U,n=e.length-1;return v(e[n])?e.length>1?r(t.apply(null,e.slice(0,n)),e[n]):r(t(),e[0]):void 0};function V(t,e){return e?U(V(t),e):function(e){var r=e[2];return l(e,(function(e,n){return r(e,t(n))}))}}function H(t,e,r){return new Q(t,e,r)}var Q=function(){function t(e,r,n){i(this,t),void 0===e?(e=0,r=1/0):void 0===r&&(r=e,e=0),n=void 0===n?e<r?1:-1:n,this.from=e,this.to=r,this.step=n}return a(t,[{key:Symbol.iterator,value:f.a.mark((function t(){var e,r,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.step,r=this.to,n=this.from,!(e>0)){t.next=12;break}case 4:if(!(n<r)){t.next=10;break}return t.next=7,n;case 7:n+=e,t.next=4;break;case 10:t.next=19;break;case 12:if(!(e<0)){t.next=19;break}case 13:if(!(n>r)){t.next=19;break}return t.next=16,n;case 16:n+=e,t.next=13;break;case 19:case"end":return t.stop()}}),t,this)}))},{key:"$reduce",value:function(t,e){var r=this.step;if(r>0)for(var n=this.from,i=this.to;n<i&&!m(e);n+=r)e=t(e,n);else for(var o=this.from,a=this.to;o>a&&!m(e);o+=r)e=t(e,o);return e}}]),t}();function K(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i;switch(e.length){case 4:i=e[3],n=e[2];break;case 3:i=e[2];break;case 2:return V((function(t){return K(e[0],e[1],t)}));default:M(e.length)}return C(e[0](e[1]),n,i)}function Z(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],h=e[7],f=e[8],d=e[9];switch(e.length){case 0:M(0);case 1:return n;case 2:return function(){return n(i.apply(void 0,arguments))};case 3:return function(){return n(i(o.apply(void 0,arguments)))};case 4:return function(){return n(i(o(a.apply(void 0,arguments))))};case 5:return function(){return n(i(o(a(s.apply(void 0,arguments)))))};case 6:return function(){return n(i(o(a(s(u.apply(void 0,arguments))))))};case 7:return function(){return n(i(o(a(s(u(l.apply(void 0,arguments)))))))};case 8:return function(){return n(i(o(a(s(u(l(h.apply(void 0,arguments))))))))};case 9:return function(){return n(i(o(a(s(u(l(h(f.apply(void 0,arguments)))))))))};case 10:default:var p=function(){return n(i(o(a(s(u(l(h(f(d.apply(void 0,arguments))))))))))};return 10===e.length?p:Z.apply(void 0,[p].concat(c(e.slice(10))))}}function X(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Z.apply(null,e)}function Y(t,e){return e?N(Y(t),e):function(e){var r=e[2],n=t;return l(e,(function(t,e){return--n>0?r(t,e):0===n?b(r(t,e)):y(t)}))}}function J(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return W(J,e)||function(t){var r=t[2],n=e[0],i=e[1]||0;return l(t,(function(t,e){return r(t,n(i++,e))}))}}function $(t,e){t=t||"";var r=!0;return e?c(e).join(t):G((function(){return""}),(function(e,n){return e=r?e+n:e+t+n,r=!1,e}))}var tt=f.a.mark(et);function et(){var t,e,r,n,i,o,a,s,u,c,l,h,d=arguments;return f.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:for(t=d.length,e=new Array(t),r=0;r<t;r++)e[r]=d[r];n=e.map((function(t){return t[Symbol.iterator]()}));case 2:0,i=[],o=!0,a=!1,s=void 0,f.prev=7,u=n[Symbol.iterator]();case 9:if(o=(c=u.next()).done){f.next=18;break}if(l=c.value,!(h=l.next()).done){f.next=14;break}return f.abrupt("return");case 14:i.push(h.value);case 15:o=!0,f.next=9;break;case 18:f.next=24;break;case 20:f.prev=20,f.t0=f.catch(7),a=!0,s=f.t0;case 24:f.prev=24,f.prev=25,o||null==u.return||u.return();case 27:if(f.prev=27,!a){f.next=30;break}throw s;case 30:return f.finish(27);case 31:return f.finish(24);case 32:return f.next=34,i;case 34:f.next=2;break;case 36:case"end":return f.stop()}}),tt,null,[[7,20,24,32],[25,,27,31]])}var rt=function(t){var e=n(t,2),r=e[0],i=e[1];return"".concat(r,"*").concat(i)},nt=I((function(){return"unsupported operation"})),it=function(t){throw new nt(t)},ot=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=new Array(5),n=function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=r[i[e].length]||t;return a?a.apply(void 0,i):it("no impl for vec size ".concat(i[e].length))};return n.add=function(t,e){return r[t]=e},n.default=function(e){return t=e},n.impl=function(e){return r[e]||t},n},at=function(t){return V(function(t){return function(e){return e>1?"".concat(t,"[i").concat(t,"+").concat(e,"*s").concat(t,"]"):1==e?"".concat(t,"[i").concat(t,"+s").concat(t,"]"):"".concat(t,"[i").concat(t,"]")}}(t),H())},st=function(t){return V((function(e){return"".concat(t,"[").concat(e,"]")}),H())},ut=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"a",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return[o,K(X(Y(t),J((function(t,r){return e(r,t)}))),$(i),et.apply(null,r.split(",").map(s?at:st))),a,""!==n?"return ".concat(n,";"):""]},ct=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"a",n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return[n,"for(let i=a.length;--i>=0;) {",t(e.split(",").map(o?function(t){return"".concat(t,"[i").concat(t,"+i*s").concat(t,"]")}:function(t){return"".concat(t,"[i]")})),"}",i,null!==r?"return ".concat(r,";"):""]},lt=function(t,e){return"!".concat(t," && (").concat(t,"=").concat(e.split(",")[1],");")},ht=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"a",o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return new Function(r,ut(t,e,n,i,o,a,s,u).join(""))},ft=function(t,e,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"a",s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",u=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,h=arguments.length>10&&void 0!==arguments[10]&&arguments[10];return new Function(n,"return (".concat(i,")=>{").concat(ut(t,r,o,a,s,u,l,h).join(""),"}")).apply(void 0,c(e))},dt=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"a",i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return new Function(e,ct(t,r,n,i,o,a).join(""))},pt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"o,a,b",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"o",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;r=r||e,o=null!=o?o:lt(n,e);var a=ot(i),s=function(i){return a.add(i,ht(i,t,e,r,n,"",o))};return a.default(dt(t,e,r,n,o)),[a,s(2),s(3),s(4)]},vt=function(t){return pt(function(t){return function(e){var r=n(e,3),i=r[0],o=r[1],a=r[2];return"".concat(i,"=").concat(o).concat(t).concat(a,";")}}(t))},gt=function(t){return pt(function(t){return function(e){var r=n(e,2),i=r[0],o=r[1];return"".concat(i,"=").concat(o).concat(t,"n;")}}(t),"o,a,n")},yt=n(vt("-"),4),mt=yt[0],bt=(yt[1],yt[2],yt[3],function(t){return wt.add(t,ht(t,(function(t){var e=n(t,1)[0];return"".concat(e,"*").concat(e)}),"a","a","","+","return ",";"))}),wt=ot();wt.default(dt((function(t){var e=n(t,1)[0];return"sum+=".concat(e,"*").concat(e,";")}),"a",void 0,"sum","let sum=0;"));bt(2),bt(3),bt(4);var xt=function(t){return kt.add(t,ht(t,rt,"a,b",void 0,"","+","return ",";"))},kt=ot();kt.default(dt((function(t){var e=n(t,2),r=e[0],i=e[1];return"s+=".concat(r,"*").concat(i,";")}),"a,b",void 0,"s","let s=0;"));xt(2),xt(3),xt(4);var _t=pt((function(t){var e=n(t,3),r=e[0],i=e[1],o=e[2];return"".concat(r,"=").concat(i,"+(").concat(o,"-").concat(i,")*n;")}),"o,a,b,n"),Et=n(_t,4),Ft=Et[0],Lt=Et[1],jt=(Et[2],Et[3],function(t){var e=n(t,2),r=e[0],i=e[1];return"t=".concat(r,"-").concat(i,";s+=t*t;")}),St=function(t){return Pt.add(t,ht(t,jt,"a,b",void 0,"s","","let t,s=0;"))},Pt=ot();Pt.default(dt(jt,"a,b",void 0,"s","let t,s=0;"));St(2),St(3),St(4),r("bHtr");var Ot,It=pt((function(t){var e=n(t,1)[0];return"".concat(e,"=n;")}),"a,n","a","a",0,""),At=n(It,4),Mt=(At[0],At[1],At[2],At[3],function(t){return x(t,"empty")?t.empty():(e=t.length,new Array(e).fill(0));var e}),Bt=pt((function(t){var e=n(t,2),r=e[0],i=e[1];return"".concat(r,"=").concat(i,";")}),"o,a",void 0,"o",1,"!o&&(o=[]);"),Ct=n(Bt,4),Dt=Ct[0],zt=(Ct[1],Ct[2],Ct[3],Math.PI,Math.sqrt(5),Math.SQRT2,Math.sqrt(3),1e-6);!function(t){t[t.EQUAL=0]="EQUAL",t[t.FLAT=1]="FLAT",t[t.UNDER=2]="UNDER",t[t.OVER=3]="OVER",t[t.OTHER=4]="OTHER"}(Ot||(Ot={}));var Gt=n(gt("*"),4),Tt=(Gt[0],Gt[1],Gt[2],Gt[3],n(vt("+"),4)),qt=Tt[0],Rt=(Tt[1],Tt[2],Tt[3],function(t,e,r){var n=mt([],r,e),i=wt(n);return i>1e-6?kt(mt([],t,e),n)/i:void 0}),Nt=function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=Rt(t,e,r);if(void 0!==a&&(!i||a>=o&&a<=1-o))return n=n||Mt(t),a<=0?Dt(n,e):a>=1?Dt(n,r):Ft(n,e,r,a)},Ut=Math.abs,Wt=Math.max,Vt=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zt;return Ut(t-e)<=r*Wt(1,Ut(t),Ut(e))},Ht=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zt;return Ut(t-e)<=r},Qt=function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zt,o=e[0]-t[0],a=e[1]-t[1],s=n[0]-r[0],u=n[1]-r[1],c=t[0]-r[0],l=t[1]-r[1],h=u*o-s*a,f=s*l-u*c,d=o*l-a*c;if(Ht(h,0,i)){if(Ht(f,0,i)&&Ht(d,0,i)){var p=Nt(r,t,e,void 0,!0)||Nt(n,t,e,void 0,!0);return{type:p?2:3,isec:p}}return{type:1}}d/=h;var v=1-i;return{type:i<(f/=h)&&f<v&&i<d&&d<v?4:5,isec:Lt([],t,e,f),alpha:f,beta:d,det:h}},Kt=I((function(){return"illegal argument(s)"})),Zt=n(gt("/"),4),Xt=Zt[0],Yt=(Zt[1],Zt[2],Zt[3],function(t,e){var r=t.length;!r&&function(t){throw new Kt(t)}("no points"),!e&&(e=Mt(t[0]));for(var n=r;--n>=0;)qt(e,e,t[n]);return Xt(e,e,r)}),Jt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt;return t>e?1:t<-e?-1:0},$t=function(t,e,r){var n=t[0],i=t[1];return(e[0]-n)*(r[1]-i)-(r[0]-n)*(e[1]-i)},te=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zt;return Jt($t(t,e,r),n)},ee=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zt;r=r||Yt(e);for(var i=e.length,o=i-1,a=0;a<i;o=a,a++){for(var s=[],u=e[o],c=e[a],l=te(u,c,r,n),h=t.length,f=h-1,d=0;d<h;f=d,d++){var p=t[f],v=t[d],g=te(u,c,v,n);te(u,c,p,n)===l?s.push(g!==l?Qt(u,c,p,v).isec:v):g===l&&s.push(Qt(u,c,p,v).isec,v)}if(s.length<2)return[];t=s}return t},re=function(t,e,r,n,i,o){var a=t[0],s=t[1],u=e[0]-a,c=e[1]-s,l=0,h=1,f=function(t,e){if(e<0&&Math.abs(t)<zt)return!1;var r=e/t;if(t<0){if(r>h)return!1;r>l&&(l=r)}else{if(r<l)return!1;r<h&&(h=r)}return!0};if(f(-u,-(r[0]-a))&&f(u,n[0]-a)&&f(-c,-(r[1]-s))&&f(c,n[1]-s))return!i&&(i=[]),!o&&(o=[]),i[0]=l*u+a,i[1]=l*c+s,o[0]=h*u+a,o[1]=h*c+s,[i,o,l,h]},ne=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zt,i=Rt(t,e,r);return void 0!==i&&Pt(t,Ft([],e,r,u(i)))<n*n},ie=function(t,e,r,n){return wt(t)*$t(e,r,n)-wt(e)*$t(t,r,n)+wt(r)*$t(t,e,n)-wt(n)*$t(t,e,r)>0},oe=function(t,e){for(var r=e.length-1,n=t[0],i=t[1],o=e[r],a=e[0],s=0,u=0;u<=r;o=a,a=e[++u])s=ae(n,i,o[0],o[1],a[0],a[1],s);return s},ae=function(t,e,r,n,i,o,a){return(n<e&&o>=e||o<e&&n>=e)&&(r<=t||i<=t)?a^(r+(e-n)/(o-n)*(i-r)<t?1:0):a},se=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zt,i=t[0],o=t[1],a=e[0],s=e[1],u=r[0],c=r[1],l=a-i,h=s-o,f=u-a,d=c-s,p=Math.abs(h),v=Math.abs(d);if(!(p<n&&v<n||Math.abs(l)<n&&Math.abs(f)<n)){var g,y,m,b,w,x,k,_,E=(i+a)/2,F=(o+s)/2,L=(a+u)/2,j=(s+c)/2;return p<n?_=(y=-f/d)*((k=E)-(b=L))+(x=j):v<n?_=(g=-l/h)*((k=L)-(m=E))+(w=F):(k=((g=-l/h)*(m=E)-(y=-f/d)*(b=L)+(x=j)-(w=F))/(g-y),_=p>v?g*(k-m)+w:y*(k-b)+x),[k,_]}},ue=0,ce=function(){function t(e,r){i(this,t),this.parent=e,this.id=r}return a(t,[{key:"setEnds",value:function(t,e){this.origin=t,this.sym.origin=e}},{key:"connect",value:function(e){var r=t.create();return r.splice(this.lnext),r.sym.splice(e),r.setEnds(this.dest,e.origin),r}},{key:"swap",value:function(){var t=this.oprev,e=this.sym.oprev;this.splice(t),this.sym.splice(e),this.splice(t.lnext),this.sym.splice(e.lnext),this.setEnds(t.dest,e.dest)}},{key:"remove",value:function(){this.splice(this.oprev),this.sym.splice(this.sym.oprev),delete this.parent}},{key:"splice",value:function(t){var e=this.onext.rot,r=t.onext.rot,n=t.onext,i=this.onext,o=r.onext,a=e.onext;return this.onext=n,t.onext=i,e.onext=o,r.onext=a,this}},{key:"oprev",get:function(){return this.rot.onext.rot}},{key:"rot",get:function(){return this.parent[this.id+1&3]}},{key:"invrot",get:function(){return this.parent[this.id+3&3]}},{key:"sym",get:function(){return this.parent[this.id+2&3]}},{key:"dnext",get:function(){return this.sym.onext.sym}},{key:"dprev",get:function(){return this.invrot.onext.invrot}},{key:"lnext",get:function(){return this.invrot.onext.rot}},{key:"lprev",get:function(){return this.onext.sym}},{key:"rnext",get:function(){return this.rot.onext.invrot}},{key:"rprev",get:function(){return this.sym.onext}},{key:"dest",get:function(){return this.sym.origin}}],[{key:"create",value:function(e,r){var n=new Array(4),i=n[0]=new t(n,ue),o=n[1]=new t(n,ue+1),a=n[2]=new t(n,ue+2),s=n[3]=new t(n,ue+3);return i.onext=i,a.onext=a,o.onext=s,s.onext=o,ue+=4,e&&r&&i.setEnds(e,r),i}}]),t}(),le=function(t){return he.add(t,ft(t,[Vt,zt],(function(t){var e=n(t,2),r=e[0],i=e[1];return"eq(".concat(r,",").concat(i,",eps)")}),"eq,_eps","a,b,eps=_eps","a,b","","&&","return a.length === b.length && ",";"))},he=ot();he.default((function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zt;return x(t,"eqDelta")?t.eqDelta(e,r):x(e,"eqDelta")?e.eqDelta(t,r):de(t,e,t.length,r)}));var fe=le(2),de=(le(3),le(4),function(t,e,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zt,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;r>0;r--,i+=a,o+=s)if(!Vt(t[i],e[o],n))return!1;return!0}),pe=(r("DW2E"),-1/0),ve=1/0,ge=(Object.freeze([pe,pe]),Object.freeze([ve,ve]),Object.freeze([1,1]),Object.freeze([0,0]));Object.freeze([1,0]),Object.freeze([0,1]),Object.freeze([pe,pe,pe]),Object.freeze([ve,ve,ve]),Object.freeze([1,1,1]),Object.freeze([0,0,0]),Object.freeze([1,0,0]),Object.freeze([0,1,0]),Object.freeze([0,0,1]),Object.freeze([pe,pe,pe,pe]),Object.freeze([ve,ve,ve,ve]),Object.freeze([1,1,1,1]),Object.freeze([0,0,0,0]),Object.freeze([1,0,0,0]),Object.freeze([0,1,0,0]),Object.freeze([0,0,1,0]),Object.freeze([0,0,0,1]);r.d(e,"a",(function(){return me}));var ye=function(t,e){return $t(t,e.dest.pos,e.origin.pos)>0},me=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e5;i(this,t);var n={pos:[0,-r],id:0},o={pos:[r,r],id:1},a={pos:[-r,r],id:2},u=ce.create(n,o),c=ce.create(o,a),l=ce.create(a,n);u.sym.splice(c),c.sym.splice(l),l.sym.splice(u),this.boundsTri=[n.pos,o.pos,a.pos],this.first=u,this.nextID=3,e&&e.length&&(s(e[0][0])?this.addKeys(e):this.addAll(e))}return a(t,[{key:"add",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zt,i=this.locate(t,r),o=n(i,2),a=o[0],s=o[1];if(s)return!1;ne(t,a.origin.pos,a.dest.pos)&&(a=a.oprev).onext.remove();var u=ce.create(a.origin,{pos:t,id:this.nextID++,val:e});u.splice(a);var c=u;do{u=a.connect(u.sym),a=u.oprev}while(a.lnext!==c);for(;;){var l=a.oprev;if(ye(l.dest.pos,a)&&ie(a.origin.pos,l.dest.pos,a.dest.pos,t))a.swap(),a=a.oprev;else{if(a.onext===c)break;a=a.onext.lprev}}return!0}},{key:"addKeys",value:function(t,e){var r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;this.add(s,void 0,e)}}catch(u){n=!0,i=u}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}this.computeDual()}},{key:"addAll",value:function(t,e){var r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;this.add(s[0],s[1],e)}}catch(u){n=!0,i=u}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}this.computeDual()}},{key:"locate",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt,r=this.first;;){if(fe(t,r.origin.pos,e)||fe(t,r.dest.pos,e))return[r,!0];if(ye(t,r))r=r.sym;else if(ye(t,r.onext)){if(ye(t,r.dprev))return[r,!1];r=r.dprev}else r=r.onext}}},{key:"computeDual",value:function(){for(var t=[this.first.rot],e={},r={};t.length;){var n=t.pop();if(!e[n.id]){if(e[n.id]=!0,!n.origin||!r[n.origin.id]){var i=n.rot,o=i.origin.pos,a=this.isBoundary(o),s=(i=i.lnext).origin.pos;a=a&&this.isBoundary(s);var u=(i=i.lnext).origin.pos;a=a&&this.isBoundary(u);var c=this.nextID++;n.origin={pos:a?ge:se(o,s,u),id:c},r[c]=!0}t.push(n.sym,n.onext,n.lnext)}}}},{key:"delaunay",value:function(t){var e=[],r={},n=t&&Yt(t);return this.traverse((function(i){if(!r[i.id]){var o=i.lnext,a=o.lnext,s=i.origin.pos,u=o.origin.pos,c=a.origin.pos,l=[s,u,c];!t||oe(s,t)&&oe(u,t)&&oe(c,t)?e.push(l):(l=ee(l,t,n)).length>2&&e.push(l),r[i.id]=r[o.id]=r[a.id]=!0}})),e}},{key:"voronoi",value:function(t){var e=[],r=t&&Yt(t);return this.traverse(t?function(n){var i,o=n=n.rot,a=[],s=!1;do{i=n.origin.pos,a.push(i),s=s||!oe(i,t)}while((n=n.lnext)!==o);s&&(a=ee(a,t,r)).length<3||e.push(a)}:function(t){var r=t=t.rot,n=[];do{n.push(t.origin.pos)}while((t=t.lnext)!==r);e.push(n)},!1),e}},{key:"edges",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0,n=[],i={};return this.traverse((function(e){if(!i[e.id]&&!i[e.sym.id]){var o=e.origin.pos,a=e.dest.pos;if(!t.isBoundary(o)&&!t.isBoundary(a))if(r){var s=re(o,a,r[0],r[1]);s&&n.push([s[0],s[1]])}else n.push([o,a]);i[e.id]=!0}}),!0,e?this.first.rot:this.first),n}},{key:"traverse",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.first,n=[r],i={},o={};n.length;)i[(r=n.pop()).id]||(i[r.id]=!0,this.isBoundary(r.origin.pos)||this.isBoundary(r.rot.origin.pos)||!e&&o[r.origin.id]||(o[r.origin.id]=!0,t(r,i,o)),n.push(r.sym,r.onext,r.lnext))}},{key:"isBoundary",value:function(t){var e=this.boundsTri;return fe(e[0],t)||fe(e[1],t)||fe(e[2],t)}}]),t}()},"60nC":function(t,e,r){r("91GP"),r("6tN7");var n=r("g4M5");t.exports=function(){var t=void 0===window.p5?r("I335"):window.p5;if(void 0===t)return void console.error("p5.createLoop: p5 not found");var e=n(),i=n(),o=n();t.prototype.registerMethod("init",e.invoke),t.prototype.registerMethod("pre",i.invoke),t.prototype.registerMethod("post",o.invoke);var a=window.createLoop;t.prototype.createLoop=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,n={framesPerSecond:r._targetFrameRate||r._frameRate||60,duration:3,canvas:r.canvas};return void 0!==t&&isNaN(t)&&Object.assign(n,t),isNaN(t)||(n.duration=t),void 0!==e&&Object.assign(n,e),console.log("creating ".concat(n.duration," second loop at ").concat(n.framesPerSecond," fps")),r.animLoop=a(n),r._isGlobal&&(window.animLoop=r.animLoop),i.addListener(r.animLoop.preRender),o.addListener(r.animLoop.postRender),r.animLoop}}},"6tN7":function(t,e,r){window.createLoop=r("tSVo")},"7ERh":function(t,e,r){"use strict";r("91GP");var n=r("Fu16");t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({frequency:void 0,seed:Math.random()*i,radius:1},e);var r=new n(0);void 0!==e.frequency&&(e.radius=e.frequency);Object.assign(t,{noiseFrequency:function(t){return e.radius=t},noise:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.theta,a=void 0===i?t.theta:i,s=n.radius,u=void 0===s?e.radius:s,c=n.seed,l=void 0===c?e.seed:c,h=o(a,u);return r.noise2D(l+h.x,l+h.y)},noise1D:function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.theta,s=void 0===a?t.theta:a,u=i.radius,c=void 0===u?e.radius:u,l=i.seed,h=void 0===l?e.seed:l,f=o(s,c);return r.noise3D(h+f.x,h+f.y,h+n)},noise2D:function(n,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=a.theta,u=void 0===s?t.theta:s,c=a.radius,l=void 0===c?e.radius:c,h=a.seed,f=void 0===h?e.seed:h,d=o(u,l);return r.noise4D(f+d.x,f+d.y,f+n,f+i)},noiseSeed:function(t){return e.seed=t},noiseRadius:function(t){return e.radius=t}})};var i=999999;function o(t,e){return{x:Math.cos(t)*e,y:Math.sin(t)*e}}},"F/bj":function(t,e,r){"use strict";r.r(e);r("I5cv"),r("/SS/"),r("HEwt"),r("a1Th"),r("rE2o"),r("ioFf"),r("rGqo"),r("yt8O"),r("Btvt"),r("XfO3"),r("T39b"),r("bHtr");var n=r("q1tI"),i=r.n(n),o=r("2PzF"),a=r("Gmm/"),s=r("ViKx"),u=(r("PZSu"),r("qKvR"));function c(t,e,r){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&l(i,r.prototype),i}).apply(null,arguments)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f={}.DEV&&!1,d=function(t){var e,r,n,i=0,a=function(){function e(e,n){t.animLoop.noise2D;var i=t.noise(e,n);this.centerX=e,this.centerY=n,this.x=e,this.y=n,this.onBoundary=r.has(e)||r.has(n),this.dist=t.map(i,-1,1,0,t.width/10),this.dir=i<0?-1:1,this.offset=t.map(i,-1,1,0,t.width/10)}var n=e.prototype;return n.update=function(){if(!this.onBoundary){var e=t.animLoop,r=e.noise2D,n=e.theta,i=Object(s.a)(this.centerX,this.centerY,(this.offset+n)*this.dir,this.dist*r(this.x/1e3,this.y/1e3)),o=i.x,a=i.y;this.x=o,this.y=a}},n.getArray=function(){return[this.x,this.y]},e}(),u=function(){function r(e){this.pts=e.map((function(t){return c(a,h(t))})),this.dir=t.random([1,-1]),this.offset=t.random(t.TWO_PI)}return r.prototype.update=function(){var r=this,n=t.animLoop.theta;this.pts.forEach((function(t){return t.update()}));var o=t.createGraphics(t.width-20,t.width-20),a=t.createGraphics(t.width-20,t.width-20);o.background(255),o.noFill(),o.colorMode(t.HSB,1),o.stroke(i,1,1),a.fill(0),o.push(),o.translate(o.width/2,o.height/2),o.rotate((this.offset+n)*this.dir),o.stroke(1-i,1,1),o.strokeWeight(20);for(var s=-t.width/2;s<2*t.width;)o.line(-t.width,s-t.width,t.width,s-t.width),s+=40;o.pop(),[o,a].forEach((function(e){e.strokeWeight(20),e.strokeJoin(t.BEVEL),e.translate(e.width/2,e.height/2),e.beginShape(),r.pts.forEach((function(t){return e.vertex.apply(e,h(t.getArray()))})),e.endShape(t.CLOSE)}));var u=o.get();u.mask(a),t.image(u,e[0][0]-10,e[0][1]-10)},r}();t.setup=function(){t.pixelDensity(1),t.frameRate(30),t.createCanvas(660,840),t.colorMode(t.HSB,1),t.createLoop(30,{gif:!!f&&{render:!1,open:!0},noiseDetail:.5}),e=[[-t.width/2+20,-t.width/2+20],[t.width/2-20,-t.width/2+20],[t.width/2-20,t.width/2-20],[-t.width/2+20,t.width/2-20]],r=new Set(e.flat());var i=new Array(10).fill().map((function(){return[t.random.apply(t,h(e[3])),t.random.apply(t,h(e[3]))]})),a=new o.a(i);n=a.voronoi(e).map((function(t){return new u(t)}))},t.draw=function(){i=t.map(t.sin(t.animLoop.theta),-1,1,0,1),t.background(255),t.translate(t.width/2,t.height/2),n.forEach((function(t){return t.update()})),t.noFill(),t.stroke(i,1,1),t.strokeWeight(20),t.square.apply(t,h(e[0]).concat([t.width-40]))}};e.default=function(t){var e=t.location;return Object(u.c)(a.a,{sketch:d,path:e.pathname,description:Object(u.c)(i.a.Fragment,null,"Improved version of yesterdayâ€™s. Still pokey in browser, but the GIF it makes is ",Object(u.c)("code",null,":chefkiss:"),".")})}},Fu16:function(t,e,r){var n;r("a1Th"),r("h7Nl"),r("Btvt"),r("Y9lz"),r("NO8f"),function(){"use strict";var i=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,a=1/6,s=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;function c(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,r=0,n=1,i=(o=4022871197,function(t){t=t.toString();for(var e=0;e<t.length;e++){var r=.02519603282416938*(o+=t.charCodeAt(e));r-=o=r>>>0,o=(r*=o)>>>0,o+=4294967296*(r-=o)}return 2.3283064365386963e-10*(o>>>0)});var o;t=i(" "),e=i(" "),r=i(" ");for(var a=0;a<arguments.length;a++)(t-=i(arguments[a]))<0&&(t+=1),(e-=i(arguments[a]))<0&&(e+=1),(r-=i(arguments[a]))<0&&(r+=1);return i=null,function(){var i=2091639*t+2.3283064365386963e-10*n;return t=e,e=r,r=i-(n=0|i)}}(t):Math.random,this.p=l(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}function l(t){var e,r=new Uint8Array(256);for(e=0;e<256;e++)r[e]=e;for(e=0;e<255;e++){var n=e+~~(t()*(256-e)),i=r[e];r[e]=r[n],r[n]=i}return r}c.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var r,n,a=this.permMod12,s=this.perm,u=this.grad3,c=0,l=0,h=0,f=(t+e)*i,d=Math.floor(t+f),p=Math.floor(e+f),v=(d+p)*o,g=t-(d-v),y=e-(p-v);g>y?(r=1,n=0):(r=0,n=1);var m=g-r+o,b=y-n+o,w=g-1+2*o,x=y-1+2*o,k=255&d,_=255&p,E=.5-g*g-y*y;if(E>=0){var F=3*a[k+s[_]];c=(E*=E)*E*(u[F]*g+u[F+1]*y)}var L=.5-m*m-b*b;if(L>=0){var j=3*a[k+r+s[_+n]];l=(L*=L)*L*(u[j]*m+u[j+1]*b)}var S=.5-w*w-x*x;if(S>=0){var P=3*a[k+1+s[_+1]];h=(S*=S)*S*(u[P]*w+u[P+1]*x)}return 70*(c+l+h)},noise3D:function(t,e,r){var n,i,o,s,u,c,l,h,f,d,p=this.permMod12,v=this.perm,g=this.grad3,y=(t+e+r)*(1/3),m=Math.floor(t+y),b=Math.floor(e+y),w=Math.floor(r+y),x=(m+b+w)*a,k=t-(m-x),_=e-(b-x),E=r-(w-x);k>=_?_>=E?(u=1,c=0,l=0,h=1,f=1,d=0):k>=E?(u=1,c=0,l=0,h=1,f=0,d=1):(u=0,c=0,l=1,h=1,f=0,d=1):_<E?(u=0,c=0,l=1,h=0,f=1,d=1):k<E?(u=0,c=1,l=0,h=0,f=1,d=1):(u=0,c=1,l=0,h=1,f=1,d=0);var F=k-u+a,L=_-c+a,j=E-l+a,S=k-h+2*a,P=_-f+2*a,O=E-d+2*a,I=k-1+.5,A=_-1+.5,M=E-1+.5,B=255&m,C=255&b,D=255&w,z=.6-k*k-_*_-E*E;if(z<0)n=0;else{var G=3*p[B+v[C+v[D]]];n=(z*=z)*z*(g[G]*k+g[G+1]*_+g[G+2]*E)}var T=.6-F*F-L*L-j*j;if(T<0)i=0;else{var q=3*p[B+u+v[C+c+v[D+l]]];i=(T*=T)*T*(g[q]*F+g[q+1]*L+g[q+2]*j)}var R=.6-S*S-P*P-O*O;if(R<0)o=0;else{var N=3*p[B+h+v[C+f+v[D+d]]];o=(R*=R)*R*(g[N]*S+g[N+1]*P+g[N+2]*O)}var U=.6-I*I-A*A-M*M;if(U<0)s=0;else{var W=3*p[B+1+v[C+1+v[D+1]]];s=(U*=U)*U*(g[W]*I+g[W+1]*A+g[W+2]*M)}return 32*(n+i+o+s)},noise4D:function(t,e,r,n){var i,o,a,c,l,h,f,d,p,v,g,y,m,b,w,x,k,_=this.perm,E=this.grad4,F=(t+e+r+n)*s,L=Math.floor(t+F),j=Math.floor(e+F),S=Math.floor(r+F),P=Math.floor(n+F),O=(L+j+S+P)*u,I=t-(L-O),A=e-(j-O),M=r-(S-O),B=n-(P-O),C=0,D=0,z=0,G=0;I>A?C++:D++,I>M?C++:z++,I>B?C++:G++,A>M?D++:z++,A>B?D++:G++,M>B?z++:G++;var T=I-(h=C>=3?1:0)+u,q=A-(f=D>=3?1:0)+u,R=M-(d=z>=3?1:0)+u,N=B-(p=G>=3?1:0)+u,U=I-(v=C>=2?1:0)+2*u,W=A-(g=D>=2?1:0)+2*u,V=M-(y=z>=2?1:0)+2*u,H=B-(m=G>=2?1:0)+2*u,Q=I-(b=C>=1?1:0)+3*u,K=A-(w=D>=1?1:0)+3*u,Z=M-(x=z>=1?1:0)+3*u,X=B-(k=G>=1?1:0)+3*u,Y=I-1+4*u,J=A-1+4*u,$=M-1+4*u,tt=B-1+4*u,et=255&L,rt=255&j,nt=255&S,it=255&P,ot=.6-I*I-A*A-M*M-B*B;if(ot<0)i=0;else{var at=_[et+_[rt+_[nt+_[it]]]]%32*4;i=(ot*=ot)*ot*(E[at]*I+E[at+1]*A+E[at+2]*M+E[at+3]*B)}var st=.6-T*T-q*q-R*R-N*N;if(st<0)o=0;else{var ut=_[et+h+_[rt+f+_[nt+d+_[it+p]]]]%32*4;o=(st*=st)*st*(E[ut]*T+E[ut+1]*q+E[ut+2]*R+E[ut+3]*N)}var ct=.6-U*U-W*W-V*V-H*H;if(ct<0)a=0;else{var lt=_[et+v+_[rt+g+_[nt+y+_[it+m]]]]%32*4;a=(ct*=ct)*ct*(E[lt]*U+E[lt+1]*W+E[lt+2]*V+E[lt+3]*H)}var ht=.6-Q*Q-K*K-Z*Z-X*X;if(ht<0)c=0;else{var ft=_[et+b+_[rt+w+_[nt+x+_[it+k]]]]%32*4;c=(ht*=ht)*ht*(E[ft]*Q+E[ft+1]*K+E[ft+2]*Z+E[ft+3]*X)}var dt=.6-Y*Y-J*J-$*$-tt*tt;if(dt<0)l=0;else{var pt=_[et+1+_[rt+1+_[nt+1+_[it+1]]]]%32*4;l=(dt*=dt)*dt*(E[pt]*Y+E[pt+1]*J+E[pt+2]*$+E[pt+3]*tt)}return 27*(i+o+a+c+l)}},c._buildPermutationTable=l,void 0===(n=function(){return c}.call(e,r,e,t))||(t.exports=n),e.SimplexNoise=c,t.exports=c}()},I5cv:function(t,e,r){var n=r("XKFU"),i=r("Kuth"),o=r("2OiF"),a=r("y3w9"),s=r("0/R4"),u=r("eeVq"),c=r("8MEG"),l=(r("dyZX").Reflect||{}).construct,h=u((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),f=!u((function(){l((function(){}))}));n(n.S+n.F*(h||f),"Reflect",{construct:function(t,e){o(t),a(e);var r=arguments.length<3?t:o(arguments[2]);if(f&&!h)return l(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(c.apply(t,n))}var u=r.prototype,d=i(s(u)?u:Object.prototype),p=Function.apply.call(t,d,e);return s(p)?p:d}})},NaHs:function(t,e){var r=window.URL.createObjectURL(new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module \'"+o+"\'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var NeuQuant=require("./TypedNeuQuant.js");var LZWEncoder=require("./LZWEncoder.js");function ByteArray(){this.page=-1;this.pages=[];this.newPage()}ByteArray.pageSize=4096;ByteArray.charMap={};for(var i=0;i<256;i++)ByteArray.charMap[i]=String.fromCharCode(i);ByteArray.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ByteArray.pageSize);this.cursor=0};ByteArray.prototype.getData=function(){var rv="";for(var p=0;p<this.pages.length;p++){for(var i=0;i<ByteArray.pageSize;i++){rv+=ByteArray.charMap[this.pages[p][i]]}}return rv};ByteArray.prototype.writeByte=function(val){if(this.cursor>=ByteArray.pageSize)this.newPage();this.pages[this.page][this.cursor++]=val};ByteArray.prototype.writeUTFBytes=function(string){for(var l=string.length,i=0;i<l;i++)this.writeByte(string.charCodeAt(i))};ByteArray.prototype.writeBytes=function(array,offset,length){for(var l=length||array.length,i=offset||0;i<l;i++)this.writeByte(array[i])};function GIFEncoder(width,height){this.width=~~width;this.height=~~height;this.transparent=null;this.transIndex=0;this.repeat=-1;this.delay=0;this.image=null;this.pixels=null;this.indexedPixels=null;this.colorDepth=null;this.colorTab=null;this.neuQuant=null;this.usedEntry=new Array;this.palSize=7;this.dispose=-1;this.firstFrame=true;this.sample=10;this.dither=false;this.globalPalette=false;this.out=new ByteArray}GIFEncoder.prototype.setDelay=function(milliseconds){this.delay=Math.round(milliseconds/10)};GIFEncoder.prototype.setFrameRate=function(fps){this.delay=Math.round(100/fps)};GIFEncoder.prototype.setDispose=function(disposalCode){if(disposalCode>=0)this.dispose=disposalCode};GIFEncoder.prototype.setRepeat=function(repeat){this.repeat=repeat};GIFEncoder.prototype.setTransparent=function(color){this.transparent=color};GIFEncoder.prototype.addFrame=function(imageData){this.image=imageData;this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null;this.getImagePixels();this.analyzePixels();if(this.globalPalette===true)this.globalPalette=this.colorTab;if(this.firstFrame){this.writeLSD();this.writePalette();if(this.repeat>=0){this.writeNetscapeExt()}}this.writeGraphicCtrlExt();this.writeImageDesc();if(!this.firstFrame&&!this.globalPalette)this.writePalette();this.writePixels();this.firstFrame=false};GIFEncoder.prototype.finish=function(){this.out.writeByte(59)};GIFEncoder.prototype.setQuality=function(quality){if(quality<1)quality=1;this.sample=quality};GIFEncoder.prototype.setDither=function(dither){if(dither===true)dither="FloydSteinberg";this.dither=dither};GIFEncoder.prototype.setGlobalPalette=function(palette){this.globalPalette=palette};GIFEncoder.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};GIFEncoder.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};GIFEncoder.prototype.analyzePixels=function(){if(!this.colorTab){this.neuQuant=new NeuQuant(this.pixels,this.sample);this.neuQuant.buildColormap();this.colorTab=this.neuQuant.getColormap()}if(this.dither){this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null)}else{this.indexPixels()}this.pixels=null;this.colorDepth=8;this.palSize=7;if(this.transparent!==null){this.transIndex=this.findClosest(this.transparent,true)}};GIFEncoder.prototype.indexPixels=function(imgq){var nPix=this.pixels.length/3;this.indexedPixels=new Uint8Array(nPix);var k=0;for(var j=0;j<nPix;j++){var index=this.findClosestRGB(this.pixels[k++]&255,this.pixels[k++]&255,this.pixels[k++]&255);this.usedEntry[index]=true;this.indexedPixels[j]=index}};GIFEncoder.prototype.ditherPixels=function(kernel,serpentine){var kernels={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!kernel||!kernels[kernel]){throw"Unknown dithering kernel: "+kernel}var ds=kernels[kernel];var index=0,height=this.height,width=this.width,data=this.pixels;var direction=serpentine?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var y=0;y<height;y++){if(serpentine)direction=direction*-1;for(var x=direction==1?0:width-1,xend=direction==1?width:0;x!==xend;x+=direction){index=y*width+x;var idx=index*3;var r1=data[idx];var g1=data[idx+1];var b1=data[idx+2];idx=this.findClosestRGB(r1,g1,b1);this.usedEntry[idx]=true;this.indexedPixels[index]=idx;idx*=3;var r2=this.colorTab[idx];var g2=this.colorTab[idx+1];var b2=this.colorTab[idx+2];var er=r1-r2;var eg=g1-g2;var eb=b1-b2;for(var i=direction==1?0:ds.length-1,end=direction==1?ds.length:0;i!==end;i+=direction){var x1=ds[i][1];var y1=ds[i][2];if(x1+x>=0&&x1+x<width&&y1+y>=0&&y1+y<height){var d=ds[i][0];idx=index+x1+y1*width;idx*=3;data[idx]=Math.max(0,Math.min(255,data[idx]+er*d));data[idx+1]=Math.max(0,Math.min(255,data[idx+1]+eg*d));data[idx+2]=Math.max(0,Math.min(255,data[idx+2]+eb*d))}}}}};GIFEncoder.prototype.findClosest=function(c,used){return this.findClosestRGB((c&16711680)>>16,(c&65280)>>8,c&255,used)};GIFEncoder.prototype.findClosestRGB=function(r,g,b,used){if(this.colorTab===null)return-1;if(this.neuQuant&&!used){return this.neuQuant.lookupRGB(r,g,b)}var c=b|g<<8|r<<16;var minpos=0;var dmin=256*256*256;var len=this.colorTab.length;for(var i=0,index=0;i<len;index++){var dr=r-(this.colorTab[i++]&255);var dg=g-(this.colorTab[i++]&255);var db=b-(this.colorTab[i++]&255);var d=dr*dr+dg*dg+db*db;if((!used||this.usedEntry[index])&&d<dmin){dmin=d;minpos=index}}return minpos};GIFEncoder.prototype.getImagePixels=function(){var w=this.width;var h=this.height;this.pixels=new Uint8Array(w*h*3);var data=this.image;var srcPos=0;var count=0;for(var i=0;i<h;i++){for(var j=0;j<w;j++){this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];srcPos++}}};GIFEncoder.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33);this.out.writeByte(249);this.out.writeByte(4);var transp,disp;if(this.transparent===null){transp=0;disp=0}else{transp=1;disp=2}if(this.dispose>=0){disp=dispose&7}disp<<=2;this.out.writeByte(0|disp|0|transp);this.writeShort(this.delay);this.out.writeByte(this.transIndex);this.out.writeByte(0)};GIFEncoder.prototype.writeImageDesc=function(){this.out.writeByte(44);this.writeShort(0);this.writeShort(0);this.writeShort(this.width);this.writeShort(this.height);if(this.firstFrame||this.globalPalette){this.out.writeByte(0)}else{this.out.writeByte(128|0|0|0|this.palSize)}};GIFEncoder.prototype.writeLSD=function(){this.writeShort(this.width);this.writeShort(this.height);this.out.writeByte(128|112|0|this.palSize);this.out.writeByte(0);this.out.writeByte(0)};GIFEncoder.prototype.writeNetscapeExt=function(){this.out.writeByte(33);this.out.writeByte(255);this.out.writeByte(11);this.out.writeUTFBytes("NETSCAPE2.0");this.out.writeByte(3);this.out.writeByte(1);this.writeShort(this.repeat);this.out.writeByte(0)};GIFEncoder.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var n=3*256-this.colorTab.length;for(var i=0;i<n;i++)this.out.writeByte(0)};GIFEncoder.prototype.writeShort=function(pValue){this.out.writeByte(pValue&255);this.out.writeByte(pValue>>8&255)};GIFEncoder.prototype.writePixels=function(){var enc=new LZWEncoder(this.width,this.height,this.indexedPixels,this.colorDepth);enc.encode(this.out)};GIFEncoder.prototype.stream=function(){return this.out};module.exports=GIFEncoder},{"./LZWEncoder.js":2,"./TypedNeuQuant.js":3}],2:[function(require,module,exports){var EOF=-1;var BITS=12;var HSIZE=5003;var masks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function LZWEncoder(width,height,pixels,colorDepth){var initCodeSize=Math.max(2,colorDepth);var accum=new Uint8Array(256);var htab=new Int32Array(HSIZE);var codetab=new Int32Array(HSIZE);var cur_accum,cur_bits=0;var a_count;var free_ent=0;var maxcode;var clear_flg=false;var g_init_bits,ClearCode,EOFCode;function char_out(c,outs){accum[a_count++]=c;if(a_count>=254)flush_char(outs)}function cl_block(outs){cl_hash(HSIZE);free_ent=ClearCode+2;clear_flg=true;output(ClearCode,outs)}function cl_hash(hsize){for(var i=0;i<hsize;++i)htab[i]=-1}function compress(init_bits,outs){var fcode,c,i,ent,disp,hsize_reg,hshift;g_init_bits=init_bits;clear_flg=false;n_bits=g_init_bits;maxcode=MAXCODE(n_bits);ClearCode=1<<init_bits-1;EOFCode=ClearCode+1;free_ent=ClearCode+2;a_count=0;ent=nextPixel();hshift=0;for(fcode=HSIZE;fcode<65536;fcode*=2)++hshift;hshift=8-hshift;hsize_reg=HSIZE;cl_hash(hsize_reg);output(ClearCode,outs);outer_loop:while((c=nextPixel())!=EOF){fcode=(c<<BITS)+ent;i=c<<hshift^ent;if(htab[i]===fcode){ent=codetab[i];continue}else if(htab[i]>=0){disp=hsize_reg-i;if(i===0)disp=1;do{if((i-=disp)<0)i+=hsize_reg;if(htab[i]===fcode){ent=codetab[i];continue outer_loop}}while(htab[i]>=0)}output(ent,outs);ent=c;if(free_ent<1<<BITS){codetab[i]=free_ent++;htab[i]=fcode}else{cl_block(outs)}}output(ent,outs);output(EOFCode,outs)}function encode(outs){outs.writeByte(initCodeSize);remaining=width*height;curPixel=0;compress(initCodeSize+1,outs);outs.writeByte(0)}function flush_char(outs){if(a_count>0){outs.writeByte(a_count);outs.writeBytes(accum,0,a_count);a_count=0}}function MAXCODE(n_bits){return(1<<n_bits)-1}function nextPixel(){if(remaining===0)return EOF;--remaining;var pix=pixels[curPixel++];return pix&255}function output(code,outs){cur_accum&=masks[cur_bits];if(cur_bits>0)cur_accum|=code<<cur_bits;else cur_accum=code;cur_bits+=n_bits;while(cur_bits>=8){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}if(free_ent>maxcode||clear_flg){if(clear_flg){maxcode=MAXCODE(n_bits=g_init_bits);clear_flg=false}else{++n_bits;if(n_bits==BITS)maxcode=1<<BITS;else maxcode=MAXCODE(n_bits)}}if(code==EOFCode){while(cur_bits>0){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}flush_char(outs)}}this.encode=encode}module.exports=LZWEncoder},{}],3:[function(require,module,exports){var ncycles=100;var netsize=256;var maxnetpos=netsize-1;var netbiasshift=4;var intbiasshift=16;var intbias=1<<intbiasshift;var gammashift=10;var gamma=1<<gammashift;var betashift=10;var beta=intbias>>betashift;var betagamma=intbias<<gammashift-betashift;var initrad=netsize>>3;var radiusbiasshift=6;var radiusbias=1<<radiusbiasshift;var initradius=initrad*radiusbias;var radiusdec=30;var alphabiasshift=10;var initalpha=1<<alphabiasshift;var alphadec;var radbiasshift=8;var radbias=1<<radbiasshift;var alpharadbshift=alphabiasshift+radbiasshift;var alpharadbias=1<<alpharadbshift;var prime1=499;var prime2=491;var prime3=487;var prime4=503;var minpicturebytes=3*prime4;function NeuQuant(pixels,samplefac){var network;var netindex;var bias;var freq;var radpower;function init(){network=[];netindex=new Int32Array(256);bias=new Int32Array(netsize);freq=new Int32Array(netsize);radpower=new Int32Array(netsize>>3);var i,v;for(i=0;i<netsize;i++){v=(i<<netbiasshift+8)/netsize;network[i]=new Float64Array([v,v,v,0]);freq[i]=intbias/netsize;bias[i]=0}}function unbiasnet(){for(var i=0;i<netsize;i++){network[i][0]>>=netbiasshift;network[i][1]>>=netbiasshift;network[i][2]>>=netbiasshift;network[i][3]=i}}function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha;network[i][1]-=alpha*(network[i][1]-g)/initalpha;network[i][2]-=alpha*(network[i][2]-r)/initalpha}function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}}}function contest(b,g,r){var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<netsize;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i}biasdist=dist-(bias[i]>>intbiasshift-netbiasshift);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i}betafreq=freq[i]>>betashift;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift}freq[bestpos]+=beta;bias[bestpos]-=betagamma;return bestbiaspos}function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize;i++){p=network[i];smallpos=i;smallval=p[1];for(j=i+1;j<netsize;j++){q=network[j];if(q[1]<smallval){smallpos=j;smallval=q[1]}}q=network[smallpos];if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j}if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i}}netindex[previouscol]=startpos+maxnetpos>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos}function inxsearch(b,g,r){var a,p,dist;var bestd=1e3;var best=-1;var i=netindex[g];var j=i-1;while(i<netsize||j>=0){if(i<netsize){p=network[i];dist=p[1]-g;if(dist>=bestd)i=netsize;else{i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}if(j>=0){p=network[j];dist=g-p[1];if(dist>=bestd)j=-1;else{j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}}return best}function learn(){var i;var lengthcount=pixels.length;var alphadec=30+(samplefac-1)/3;var samplepixels=lengthcount/(3*samplefac);var delta=~~(samplepixels/ncycles);var alpha=initalpha;var radius=initradius;var rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=alpha*((rad*rad-i*i)*radbias/(rad*rad));var step;if(lengthcount<minpicturebytes){samplefac=1;step=3}else if(lengthcount%prime1!==0){step=3*prime1}else if(lengthcount%prime2!==0){step=3*prime2}else if(lengthcount%prime3!==0){step=3*prime3}else{step=3*prime4}var b,g,r,j;var pix=0;i=0;while(i<samplepixels){b=(pixels[pix]&255)<<netbiasshift;g=(pixels[pix+1]&255)<<netbiasshift;r=(pixels[pix+2]&255)<<netbiasshift;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec;rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(j=0;j<rad;j++)radpower[j]=alpha*((rad*rad-j*j)*radbias/(rad*rad))}}}function buildColormap(){init();learn();unbiasnet();inxbuild()}this.buildColormap=buildColormap;function getColormap(){var map=[];var index=[];for(var i=0;i<netsize;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2]}return map}this.getColormap=getColormap;this.lookupRGB=inxsearch}module.exports=NeuQuant},{}],4:[function(require,module,exports){var GIFEncoder,renderFrame;GIFEncoder=require("./GIFEncoder.js");renderFrame=function(frame){var encoder,page,stream,transfer;encoder=new GIFEncoder(frame.width,frame.height);if(frame.index===0){encoder.writeHeader()}else{encoder.firstFrame=false}encoder.setTransparent(frame.transparent);encoder.setRepeat(frame.repeat);encoder.setDelay(frame.delay);encoder.setQuality(frame.quality);encoder.setDither(frame.dither);encoder.setGlobalPalette(frame.globalPalette);encoder.addFrame(frame.data);if(frame.last){encoder.finish()}if(frame.globalPalette===true){frame.globalPalette=encoder.getGlobalPalette()}stream=encoder.stream();frame.data=stream.pages;frame.cursor=stream.cursor;frame.pageSize=stream.constructor.pageSize;if(frame.canTransfer){transfer=function(){var i,len,ref,results;ref=frame.data;results=[];for(i=0,len=ref.length;i<len;i++){page=ref[i];results.push(page.buffer)}return results}();return self.postMessage(frame,transfer)}else{return self.postMessage(frame)}};self.onmessage=function(event){return renderFrame(event.data)}},{"./GIFEncoder.js":1}]},{},[4]);'],{type:"text/javascript"}));t.exports=r},PZSu:function(t,e,r){r("60nC")()},ViKx:function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return i})),r.d(e,"b",(function(){return o}));var n=function(t,e,r){return t+Math.cos(e)*r},i=function(t,e,r){return t+Math.sin(e)*r},o=function(t,e,r,n,i,o){void 0===o&&(o=!1);var a=t+Math.cos(r)*n,s=e+Math.sin(r)*i;return o?[a,s]:{x:a,y:s}};e.a=function(t,e,r,o,a){void 0===a&&(a=!1);var s=n(t,r,o),u=i(e,r,o);return a?[s,u]:{x:s,y:u}}},g4M5:function(t,e,r){r("8+KV"),r("V+eJ"),r("dRSK"),t.exports=function(){var t=[];return{_listeners:t,addListener:function(e){void 0===t.find((function(t){return e===t}))?t.push(e):console.log("listener already in event: ".concat(e))},removeListener:function(e){void 0!==t.find((function(t){return e===t}))?t.splice(t.indexOf(e),1):console.log("listener not found: ".concat(e))},invoke:function(e){return t.forEach((function(t){return t(e)}))}}}},"knn/":function(t,e,r){r("8+KV"),r("V+eJ"),r("dRSK"),t.exports=function(){var t=[];return{_listeners:t,addListener:function(e){void 0===t.find((function(t){return e===t}))?t.push(e):console.log("listener already in event: ".concat(e))},removeListener:function(e){void 0!==t.find((function(t){return e===t}))?t.splice(t.indexOf(e),1):console.log("listener not found: ".concat(e))},invoke:function(e){return t.forEach((function(t){return t(e)}))}}}},ls82:function(t,e,r){r("rGqo"),r("yt8O"),r("a1Th"),r("h7Nl"),r("VRzm"),r("Btvt"),r("/SS/"),r("f3/d"),r("8+KV"),r("hHhE"),r("rE2o"),r("ioFf");var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new j(n||[]);return o._invoke=function(t,e,r){var n=l;return function(i,o){if(n===f)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw o;return P()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var u=c(t,e,r);if("normal"===u.type){if(n=r.done?d:h,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(t,r,a),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}t.wrap=u;var l="suspendedStart",h="suspendedYield",f="executing",d="completed",p={};function v(){}function g(){}function y(){}var m={};m[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(S([])));w&&w!==r&&n.call(w,o)&&(m=w);var x=y.prototype=v.prototype=Object.create(m);function k(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t){var e;this._invoke=function(r,i){function o(){return new Promise((function(e,o){!function e(r,i,o,a){var s=c(t[r],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return e("throw",t,o,a)}))}a(s.arg)}(r,i,e,o)}))}return e=e?e.then(o,o):o()}}function E(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,E(t,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=c(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function F(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(F,this),this.reset(!0)}function S(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:P}}function P(){return{value:e,done:!0}}return g.prototype=x.constructor=y,y.constructor=g,y[s]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},k(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,r,n,i){var o=new _(u(e,r,n,i));return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(x),x[s]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:S(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=n}catch(i){Function("r","regeneratorRuntime = r")(n)}},o0o1:function(t,e,r){t.exports=r("ls82")},p56p:function(t,e,r){r("eM6i"),r("91GP");var n=r("knn/");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.framesPerSecond,r=t.duration,i=t.loop,o=n(),a=n(),s=n();s.addListener((function(){i.elapsedFrames++,i.elapsedFramesTotal++,i.elapsedFrames%i.framesPerLoop==0?(i.elapsedFrames=0,i.elapsedLoops++,i.progress=i.elapsedFrames/i.framesPerLoop,i.theta=i.progress*Math.PI*2,o.invoke()):(i.progress=i.elapsedFrames/i.framesPerLoop,i.theta=i.progress*Math.PI*2)}));var u=Math.floor(r*e),c=1/e*1e3;Object.assign(i,{start:function(t){var e=Date.now();!function r(){var n=i.elapsedFramesTotal*i.frameDeltaTime;Date.now()-e>=n&&(s.invoke(),t(),a.invoke());requestAnimationFrame(r)}()},onLoop:o,onPreRender:s,onPostRender:a,preRender:function(t){return s.invoke()},postRender:function(t){return a.invoke()},animationFrame:function(t){return onAnimationFrame.invoke()},get framesPerLoop(){return u},get framesPerSecond(){return e},get frameDeltaTime(){return c},elapsedFrames:-1,elapsedFramesTotal:-1,elapsedLoops:-1,progress:void 0,theta:void 0})}},tSVo:function(t,e,r){var n=r("p56p"),i=r("7ERh"),o=r("vEUt");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.duration,r=void 0===e?3:e,a=t.framesPerSecond,s=void 0===a?30:a,u=t.gif,c=void 0!==u&&u,l=t.gifRender,h=void 0===l?void 0:l,f=t.gifOpen,d=void 0===f?void 0:f,p=t.gifDownload,v=void 0===p?void 0:p,g=t.gifStartLoop,y=void 0===g?void 0:g,m=t.gifEndLoop,b=void 0===m?void 0:m,w=t.gifFileName,x=void 0===w?void 0:w,k=t.gifOptions,_=void 0===k?void 0:k,E=t.noise,F=void 0===E?{}:E,L=t.noiseRadius,j=void 0===L?void 0:L,S=t.noiseSeed,P=void 0===S?void 0:S,O=t.canvas,I=void 0===O?void 0:O,A={};n({framesPerSecond:s,duration:r,loop:A}),void 0!==j&&(F.radius=j);void 0!==P&&(F.seed=P);i(A,F),!1!==c&&(c=!0===c?{}:c,void 0!==I&&(c.canvas=I),void 0!==h&&(c.render=h),void 0!==d&&(c.open=d),void 0!==v&&(c.download=v),void 0!==y&&(c.startLoop=y),void 0!==_&&(c.options=_),void 0!==b&&(c.endLoop=b),void 0!==x&&(c.fileName=x),o(A,c));return A}},vEUt:function(t,e,r){r("eM6i"),r("91GP");var n=r("zUBP"),i=r("NaHs");t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.render,o=void 0===r||r,a=e.open,s=void 0!==a&&a,u=e.download,c=void 0!==u&&u,l=e.startLoop,h=void 0===l?0:l,f=e.endLoop,d=void 0===f?1:f,p=e.fileName,v=void 0===p?"image.gif":p,g=e.canvas,y=void 0===g?document.getElementsByTagName("canvas")[0]:g,m=e.options,b=void 0===m?{}:m;if(void 0===y)return void console.error("GIF module: no canvas found");var w=new n(Object.assign({workerScript:i},b)),x=!1,k=void 0;function _(){t.elapsedLoops===h?(console.log("creating GIF with ".concat(E," frames")),t.onPostRender.addListener(F)):t.elapsedLoops===d&&(t.onPostRender.removeListener(F),t.onLoop.removeListener(_),console.log("rendering GIF"),k=Date.now(),w.render())}t.onLoop.addListener(_),w.on("finished",(function(e){if(x)return;x=!0;var r=Date.now()-k;console.log("finished rendering GIF\n                    render time: ".concat((r/1e3).toFixed(1)," seconds\n                    approx size: ").concat((e.size/1e3).toFixed(0)," kb\n                    frame count: ").concat(E,"\n                    frame delay: ").concat(t.frameDeltaTime.toFixed(1)," ms\n                    "));var n=URL.createObjectURL(e);if(o){t.onLoop.addListener((function e(){t.onLoop.removeListener(e),function(t,e){var r=document.createElement("a");r.download=e,document.body.appendChild(r);var n=document.createElement("img");n.src=t,r.href=n.src,r.appendChild(n)}(n,v)}))}s&&window.open(n);c&&function(t,e){var r=document.createElement("a");r.style.display="none",r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}(n,v)}));var E=t.framesPerLoop*(d-h);function F(){w.addFrame(y,{copy:!0,delay:t.frameDeltaTime})}}},zUBP:function(t,e,r){var n;r("FLlr"),r("NO8f"),r("8+KV"),r("V+eJ"),r("f3/d"),r("SRfc"),t.exports=function t(e,r,i){function o(s,u){if(!r[s]){if(!e[s]){if(!u&&"function"==typeof n&&n)return n(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,(function(t){var r=e[s][1][t];return o(r||t)}),l,l.exports,t,e,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(a(r=this._events[t]))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),n=(c=r.slice()).length,u=0;u<n;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var r,n,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(r=this._events[t]).length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,r){var n,i,o,a,s;s=navigator.userAgent.toLowerCase(),a=navigator.platform.toLowerCase(),o="ie"===(n=s.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(i={name:"version"===n[1]?n[3]:n[1],version:o||parseFloat("opera"===n[1]&&n[4]?n[4]:n[2]),platform:{name:s.match(/ip(?:ad|od|hone)/)?"ios":(s.match(/(?:webos|android)/)||a.match(/mac|win|linux/)||["other"])[0]}})[i.name]=!0,i[i.name+parseInt(i.version,10)]=!0,i.platform[i.platform.name]=!0,e.exports=i},{}],3:[function(t,e,r){var n,i,o,a={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},u=[].slice;n=t("events").EventEmitter,o=t("./browser.coffee"),i=function(t){var e,r;function n(t){var r,n,i;for(n in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t),e)i=e[n],null==(r=this.options)[n]&&(r[n]=i)}return function(t,e){for(var r in e)a.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,t),e={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},r={delay:500,copy:!1},n.prototype.setOption=function(t,e){if(this.options[t]=e,null!=this._canvas&&("width"===t||"height"===t))return this._canvas[t]=e},n.prototype.setOptions=function(t){var e,r,n;for(e in r=[],t)a.call(t,e)&&(n=t[e],r.push(this.setOption(e,n)));return r},n.prototype.addFrame=function(t,e){var n,i;for(i in null==e&&(e={}),(n={}).transparent=this.options.transparent,r)n[i]=e[i]||r[i];if(null==this.options.width&&this.setOption("width",t.width),null==this.options.height&&this.setOption("height",t.height),"undefined"!=typeof ImageData&&null!==ImageData&&t instanceof ImageData)n.data=t.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?n.data=this.getContextData(t):n.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?n.data=this.getImageData(t):n.image=t}return this.frames.push(n)},n.prototype.render=function(){var t,e,r;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var t,e,r;for(r=[],t=0,e=this.frames.length;0<=e?t<e:t>e;0<=e?++t:--t)r.push(null);return r}.call(this),e=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(t=0,r=e;0<=r?t<r:t>r;0<=r?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},n.prototype.abort=function(){for(var t;null!=(t=this.activeWorkers.shift());)this.log("killing active worker"),t.terminate();return this.running=!1,this.emit("abort")},n.prototype.spawnWorkers=function(){var t,e,r,n;return t=Math.min(this.options.workers,this.frames.length),function(){r=[];for(var n=e=this.freeWorkers.length;e<=t?n<t:n>t;e<=t?n++:n--)r.push(n);return r}.apply(this).forEach((n=this,function(t){var e;return n.log("spawning worker "+t),(e=new Worker(n.options.workerScript)).onmessage=function(t){return n.activeWorkers.splice(n.activeWorkers.indexOf(e),1),n.freeWorkers.push(e),n.frameFinished(t.data)},n.freeWorkers.push(e)})),t},n.prototype.frameFinished=function(t){var e,r;if(this.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,!0===this.options.globalPalette&&(this.options.globalPalette=t.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(e=1,r=this.freeWorkers.length;1<=r?e<r:e>r;1<=r?++e:--e)this.renderNextFrame();return s.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},n.prototype.finishRendering=function(){var t,e,r,n,i,o,a,s,u,c,l,h,f,d,p,v;for(s=0,i=0,u=(d=this.imageParts).length;i<u;i++)s+=((e=d[i]).data.length-1)*e.pageSize+e.cursor;for(s+=e.pageSize-e.cursor,this.log("rendering finished - filesize "+Math.round(s/1e3)+"kb"),t=new Uint8Array(s),h=0,o=0,c=(p=this.imageParts).length;o<c;o++)for(r=a=0,l=(v=(e=p[o]).data).length;a<l;r=++a)f=v[r],t.set(f,h),r===e.data.length-1?h+=e.cursor:h+=e.pageSize;return n=new Blob([t],{type:"image/gif"}),this.emit("finished",n,t)},n.prototype.renderNextFrame=function(){var t,e,r;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return t=this.frames[this.nextFrame++],r=this.freeWorkers.shift(),e=this.getTask(t),this.log("starting frame "+(e.index+1)+" of "+this.frames.length),this.activeWorkers.push(r),r.postMessage(e)},n.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},n.prototype.getImageData=function(t){var e;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(e=this._canvas.getContext("2d")).setFill=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},n.prototype.getTask=function(t){var e,r;if(r={index:e=this.frames.indexOf(t),last:e===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===o.name},null!=t.data)r.data=t.data;else if(null!=t.context)r.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");r.data=this.getImageData(t.image)}return r},n.prototype.log=function(){var t;if(t=1<=arguments.length?u.call(arguments,0):[],this.options.debug)return console.log.apply(console,t)},n}(n),e.exports=i},{"./browser.coffee":2,events:1}]},{},[3])(3)}}]);
//# sourceMappingURL=component---src-pages-sketch-2019-08-25-js-9b71c2cfbb3bda47aa06.js.map