{"version":3,"sources":["webpack:///./src/lib/easing.js","webpack:///./src/pages/sketch/2020/03/28.js"],"names":["linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","sketch","p","size","socialDistance","particles","id","moved","Particle","x","y","this","pos","createVector","dir","acc","trails","draw","noStroke","fill","forEach","ellipse","closestParticles","filter","dist","sort","aPos","bPos","update","cps","unshift","slice","cp","direction","p5","Vector","sub","rotate","PI","normalize","add","force","mult","mag","ease","setMag","pushParticle","push","mouseX","mouseY","mousePressed","mouseDragged","touchMoved","width","height","setup","pixelDensity","createCanvas","noSmooth","background","particle","location","path","pathname","description"],"mappings":"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","file":"component---src-pages-sketch-2020-03-28-js-85d42d196a6ae00f43ff.js","sourcesContent":["// https://gist.github.com/gre/1650294\n\n// no easing, no acceleration\nconst linear = t => t;\n\n// accelerating from zero velocity\nconst easeInQuad = t => t * t;\n\n// decelerating to zero velocity\nconst easeOutQuad = t => t * (2 - t);\n\n// acceleration until halfway, then deceleration\nconst easeInOutQuad = t => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t);\n\n// accelerating from zero velocity\nconst easeInCubic = t => t * t * t;\n\n// decelerating to zero velocity\nconst easeOutCubic = t => --t * t * t + 1;\n\n// acceleration until halfway, then deceleration\nconst easeInOutCubic = t =>\n  t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n\n// accelerating from zero velocity\nconst easeInQuart = t => t * t * t * t;\n\n// decelerating to zero velocity\nconst easeOutQuart = t => 1 - --t * t * t * t;\n\n// acceleration until halfway, then deceleration\nconst easeInOutQuart = t =>\n  t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n\n// accelerating from zero velocity\nconst easeInQuint = t => t * t * t * t * t;\n\n// decelerating to zero velocity\nconst easeOutQuint = t => 1 + --t * t * t * t * t;\n\n// acceleration until halfway, then deceleration\nconst easeInOutQuint = t =>\n  t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n\nexport {\n  linear,\n  easeInQuad,\n  easeOutQuad,\n  easeInOutQuad,\n  easeInCubic,\n  easeOutCubic,\n  easeInOutCubic,\n  easeInQuart,\n  easeOutQuart,\n  easeInOutQuart,\n  easeInQuint,\n  easeOutQuint,\n  easeInOutQuint,\n};\n","import React from \"react\";\nimport SketchLayout from \"~components/sketch-layout\";\nimport \"p5.createloop\";\nimport { easeOutQuad as ease } from \"~lib/easing\";\n\nconst sketch = function(p) {\n  let size = 0;\n  let socialDistance = 0;\n  let particles = [];\n  let id = 0;\n  let moved = 0;\n\n  class Particle {\n    constructor(x, y) {\n      this.id = ++id;\n      this.pos = p.createVector(x, y);\n      this.dir = p.createVector(0, 0);\n      this.acc = p.createVector();\n      this.trails = [];\n    }\n    draw() {\n      p.noStroke();\n      p.fill(255, 0, 255, 32);\n      this.trails.forEach(pos => p.ellipse(...pos, size));\n\n      p.fill(this.id % 2 ? \"pink\" : \"orange\");\n      p.ellipse(this.pos.x, this.pos.y, size);\n    }\n    closestParticles() {\n      return particles\n        .filter(({ id }) => id !== this.id)\n        .filter(\n          ({ pos }) =>\n            p.dist(pos.x, pos.y, this.pos.x, this.pos.y) < socialDistance\n        )\n        .sort(\n          ({ pos: aPos }, { pos: bPos }) =>\n            p.dist(aPos.x, aPos.y, this.pos.x, this.pos.y) -\n            p.dist(bPos.x, bPos.y, this.pos.x, this.pos.y)\n        );\n    }\n    update() {\n      const cps = this.closestParticles();\n      this.trails.unshift([this.pos.x, this.pos.y]);\n      this.trails = this.trails.slice(0, 5);\n\n      cps.forEach(cp => {\n        moved++;\n\n        const direction = p5.Vector.sub(cp.pos, this.pos);\n        direction.rotate(p.PI);\n        direction.normalize();\n        this.dir.add(direction);\n        this.dir.normalize();\n        this.pos.add(this.dir);\n\n        const force = p5.Vector.mult(this.dir, this.pos);\n        const dist = p.dist(cp.pos.x, cp.pos.y, this.pos.x, this.pos.y);\n        const mag = ease((socialDistance - dist) / socialDistance);\n        force.setMag(mag);\n        this.acc.add(force);\n\n        this.pos.add(this.acc);\n      });\n    }\n  }\n\n  function pushParticle() {\n    particles.push(new Particle(p.mouseX, p.mouseY));\n  }\n\n  p.mousePressed = pushParticle;\n  p.mouseDragged = pushParticle;\n  p.touchMoved = function() {\n    if (\n      p.mouseX >= 0 &&\n      p.mouseY >= 0 &&\n      p.mouseX <= p.width &&\n      p.mouseY <= p.height\n    ) {\n      pushParticle();\n      return false;\n    }\n  };\n\n  p.setup = function() {\n    p.pixelDensity(1);\n    p.createCanvas(660, 840);\n    p.noSmooth();\n    particles.push(new Particle(p.width / 2, p.height / 2));\n    size = p.width / 50;\n    socialDistance += p.width / 10;\n  };\n\n  p.draw = function() {\n    p.background(0);\n\n    moved = 0;\n\n    particles.forEach(particle => {\n      particle.update();\n      particle.draw();\n    });\n    if (moved === 0) {\n      // remove off-canvas particles for performance\n      particles = particles.filter(\n        ({ pos }) =>\n          pos.x > -size &&\n          pos.x < p.width + size &&\n          pos.y > -size &&\n          pos.y < p.height + size\n      );\n    }\n  };\n};\n\nexport default ({ location }) => (\n  <SketchLayout\n    sketch={sketch}\n    path={location.pathname}\n    description=\"Click and drag to maintain social distancing.\"\n  />\n);\n"],"sourceRoot":""}