{"version":3,"sources":["webpack:///./src/lib/easing.js","webpack:///./src/pages/sketch/2020/03/29.js"],"names":["linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","sketch","w","h","p","size","socialDistance","particles","id","Particle","x","y","this","pos","createVector","dir","random","acc","trails","color","setAlpha","draw","noStroke","fill","forEach","ellipse","repulsors","r","height","width","concat","filter","dist","sort","aPos","bPos","update","cp","unshift","slice","direction","p5","Vector","sub","rotate","PI","normalize","add","force","mult","mag","ease","setMag","isOnCanvas","mouseX","mouseY","pushParticle","push","mousePressed","mouseDragged","touchMoved","setup","pixelDensity","frameRate","min","windowWidth","floor","windowHeight","createCanvas","noSmooth","background","frameCount","particle","text","length","location","path","pathname","description"],"mappings":"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","file":"component---src-pages-sketch-2020-03-29-js-44abfbe56e7df2a8553e.js","sourcesContent":["// https://gist.github.com/gre/1650294\n\n// no easing, no acceleration\nconst linear = t => t;\n\n// accelerating from zero velocity\nconst easeInQuad = t => t * t;\n\n// decelerating to zero velocity\nconst easeOutQuad = t => t * (2 - t);\n\n// acceleration until halfway, then deceleration\nconst easeInOutQuad = t => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t);\n\n// accelerating from zero velocity\nconst easeInCubic = t => t * t * t;\n\n// decelerating to zero velocity\nconst easeOutCubic = t => --t * t * t + 1;\n\n// acceleration until halfway, then deceleration\nconst easeInOutCubic = t =>\n  t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n\n// accelerating from zero velocity\nconst easeInQuart = t => t * t * t * t;\n\n// decelerating to zero velocity\nconst easeOutQuart = t => 1 - --t * t * t * t;\n\n// acceleration until halfway, then deceleration\nconst easeInOutQuart = t =>\n  t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n\n// accelerating from zero velocity\nconst easeInQuint = t => t * t * t * t * t;\n\n// decelerating to zero velocity\nconst easeOutQuint = t => 1 + --t * t * t * t * t;\n\n// acceleration until halfway, then deceleration\nconst easeInOutQuint = t =>\n  t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n\nexport {\n  linear,\n  easeInQuad,\n  easeOutQuad,\n  easeInOutQuad,\n  easeInCubic,\n  easeOutCubic,\n  easeInOutCubic,\n  easeInQuart,\n  easeOutQuart,\n  easeInOutQuart,\n  easeInQuint,\n  easeOutQuint,\n  easeInOutQuint,\n};\n","import React from \"react\";\nimport SketchLayout from \"~components/sketch-layout\";\nimport \"p5.createloop\";\nimport { easeOutQuad as ease } from \"~lib/easing\";\n\nconst sketch = (w, h) =>\n  function(p) {\n    let size = 0;\n    let socialDistance = 0;\n    let particles = [];\n    let id = 0;\n\n    class Particle {\n      constructor(x, y) {\n        this.id = ++id;\n        this.pos = p.createVector(x, y);\n        this.dir = p.createVector(\n          p.random([0.01, -0.01]),\n          p.random([0.01, -0.01])\n        );\n        this.acc = p.createVector();\n        this.trails = [];\n        this.color = p.color([\"lightgreen\", \"darkgreen\", \"green\"][this.id % 3]);\n        this.color.setAlpha(128);\n      }\n      draw() {\n        p.noStroke();\n        p.fill(96, 32);\n        this.trails.forEach(pos => p.ellipse(...pos, size));\n\n        p.fill(this.color);\n        p.ellipse(this.pos.x, this.pos.y, size);\n\n        // p.text(this.id, this.pos.x, this.pos.y);\n      }\n      repulsors() {\n        let r = [\n          new Particle(this.pos.x, 0),\n          new Particle(this.pos.x, p.height),\n          new Particle(0, this.pos.y),\n          new Particle(p.width, this.pos.y),\n        ].concat(particles);\n        r = r\n          .filter(({ id }) => id !== this.id)\n          .filter(\n            ({ pos }) =>\n              p.dist(pos.x, pos.y, this.pos.x, this.pos.y) < socialDistance\n          )\n          .sort(\n            ({ pos: aPos }, { pos: bPos }) =>\n              p.dist(aPos.x, aPos.y, this.pos.x, this.pos.y) -\n              p.dist(bPos.x, bPos.y, this.pos.x, this.pos.y)\n          )[0];\n\n        return r;\n      }\n      update() {\n        const cp = this.repulsors();\n        this.trails.unshift([this.pos.x, this.pos.y]);\n        this.trails = this.trails.slice(0, 5);\n\n        if (cp) {\n          const direction = p5.Vector.sub(cp.pos, this.pos);\n          direction.rotate(p.PI);\n          direction.normalize();\n          this.dir.add(direction);\n          this.dir.normalize();\n          this.pos.add(this.dir);\n\n          const force = p5.Vector.mult(this.dir, this.pos);\n          const dist = p.dist(cp.pos.x, cp.pos.y, this.pos.x, this.pos.y);\n          const mag = ease((socialDistance - dist) / socialDistance);\n          force.setMag(mag);\n          this.acc.add(force);\n\n          this.pos.add(this.acc);\n        } else {\n          this.dir = p.createVector(0, 0);\n          this.acc = p.createVector();\n        }\n      }\n    }\n\n    function isOnCanvas() {\n      return (\n        p.mouseX >= 0 &&\n        p.mouseY >= 0 &&\n        p.mouseX <= p.width &&\n        p.mouseY <= p.height\n      );\n    }\n\n    function pushParticle() {\n      isOnCanvas && particles.push(new Particle(p.mouseX, p.mouseY));\n    }\n\n    p.mousePressed = pushParticle;\n    p.mouseDragged = pushParticle;\n    p.touchMoved = function() {\n      pushParticle();\n      return !isOnCanvas;\n    };\n\n    p.setup = function() {\n      p.pixelDensity(1);\n      p.frameRate(30);\n\n      w = w || p.min(p.windowWidth, 1280);\n      h = h || p.floor(w * (p.windowHeight / p.windowWidth));\n\n      p.createCanvas(w, h);\n      p.noSmooth();\n      particles.push(new Particle(p.width / 2, p.height / 2));\n      size = p.width / 20;\n      socialDistance += p.width / 8;\n    };\n\n    p.draw = function() {\n      p.background(128);\n\n      if (p.frameCount % 100 === 0) {\n        particles.push(new Particle(p.width / 2, p.height / 2));\n      }\n\n      particles.forEach(particle => {\n        particle.update();\n        particle.draw();\n      });\n\n      // remove off-canvas particles for performance\n      particles = particles.filter(\n        ({ pos }) =>\n          pos.x > -(size * 2) &&\n          pos.x < p.width + size * 2 &&\n          pos.y > -(size * 2) &&\n          pos.y < p.height + size * 2\n      );\n\n      p.fill(0);\n      p.text(particles.length, 10, p.height - 10);\n    };\n  };\n\nexport default ({ location }) => (\n  <SketchLayout\n    sketch={sketch(660, 660)}\n    path={location.pathname}\n    description=\"Click and drag to maintain social distancing.\"\n  />\n);\n\nexport { sketch };\n"],"sourceRoot":""}