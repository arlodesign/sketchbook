let gridSize,maxDist,vectors=[],showDots=!0;function setup(){pixelDensity(4),createCanvas(660,840).parent("my-canvas"),background(255);let e=floor(random(25,50));maxDist=dist(0,0,width,height);for(let t=0;t<=e;t++)for(let r=0;r<=e;r++)random()<.2&&vectors.push({vector:createVector(width/e*t,height/e*r),reached:!1,reachedBy:0});vectors[0].reached=!0,vectors[0].reachedBy=-1}function draw(){push(),stroke(showDots?"red":255),strokeWeight(1),vectors.filter(e=>!e.reached).forEach(({vector:e})=>point(e.x,e.y)),pop(),vectors.forEach(({vector:e,reached:t,reachedBy:r},o)=>{if(t&&r>-1){const{x:t,y:c}=vectors[r].vector;stroke(0),strokeWeight(2),noFill(),line(e.x,e.y,t,c),fill(0),triangle(e.x,e.y,t,c,t,e.y),e.x!==t&&e.y!==c||o%3!=0||ellipse(t,c,dist(t,c,e.x,e.y))}});let e,t,r=maxDist;drawingComplete||(vectors.forEach((o,c)=>{o.reached||vectors.forEach((s,a)=>{if(s.reached){const h=dist(o.vector.x,o.vector.y,s.vector.x,s.vector.y);h<r&&(r=h,t=c,e=a)}})}),vectors[t].reached=!0,vectors[t].reachedBy=e),vectors.filter(e=>e.reached).length===vectors.length&&(noLoop(),drawingComplete=!0)}